<!DOCTYPE html>
<html>
<head>
<meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
<title>Drawing Code</title>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="tx7d5WE+QHBa06VMNta/mFWfJoGs+7MnyM6ot5sIefuSBRdsgbjJgOBvTG6Aiki2XIRMbEB6ZkCZAjsHXPtShQ==" />
<link rel="stylesheet" media="all" href="../../../assets/application.self-43238b9dc9479c930a126bb09dba232c84eaa81aa7c30703d5d90244186a5f77-body=1.css" data-turbolinks-track="reload" />
<script src="../../../assets/jquery.self-660adc51e0224b731d29f575a6f1ec167ba08ad06ed5deca4f1e8654c135bf4c.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/jquery_ujs.self-e87806d0cf4489aeb1bb7288016024e8de67fd18db693fe026fe3907581e53cd.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/bootstrap.self-4e71bfbf6aff83432bb0f204b1cfa3beaf9d05f0d2acf9ec752924a628245be1.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/turbolinks.self-c5acd7a204f5f25ce7a1d8a0e4d92e28d34c9e2df2c7371cd7af88e147e4ad82.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/ace/ace.self-0acb0427eef086a17859bfe56ecfaf24bc47c928ad7db87d5ec5bf235e40cb40.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/ace/mode-javascript.self-f62f7e63cad01dbe717d22344bf979ec13fa33f523d1b94b1576022bd4aa4d7a.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/action_cable.self-1641ec3e8ea24ed63601e86efcca7f9266e09f390e82199d56aa7e4bd50e1aa9.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/cable.self-6e0514260c1aa76eaf252412ce74e63f68819fd19bf740595f592c5ba4c36537.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/code_i_wrote.self-3c7f058b4395fe52a93f2ddb0f1c44ac05f84bd2382709aff2f7e89443f3e089.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/code_preview.self-b37269bda74e81e3e6e832ad40469072b79b5b1d3a48a2e91986fd44549f82c0.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/drawings.self-1119b89f5468a45fd5e064d9ba68962f14b5248b9ff1a6b33b2307875e470686.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/examples.self-62f6af2ec5a00cd81eb1292963de6ac7a2146c48d0d3cba6abe1adc998cae145.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/init.self-fef4ca73cdd5fc98231ba13aa0c4b3f7a626e61c3afedb604da73204cdfb80bc.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/jasmine_examples/Player.self-df86cadc05ae752e78b03dabdf6332dfdb2fb5016d4cf4572c81e57779cc62c4.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/jasmine_examples/Song.self-676a725aa543d21fbf2f98b899a89804ae472e93d25bc4f115b4914af237a610.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lesson.self-4c007310fc5244946716688a8afc18ef0b6e54f4cfc18f8aff6b18ab0e203889.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/animated_cityscape/stage1.self-80e467064710da3b6cd9a06f0893672dbc339fa3ce3fbda6993898f97d144340.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/animated_cityscape/stage2.self-2bc6acdcf50b13621a3143f4e5f34cf01318613ef8549650b0c8c59e6db66faf.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/arrays.self-6668c327ba2e7d5bcf91328a1b2dad1acf19568b060719f2428daab71e3d722a.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/basic_cityscape/stage1.self-af3dd34f4f344c2e4c6fd02ae6fcf3a3ab4cd43a8d72b9e10ac7e857ec7e3321.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/basic_cityscape/stage2.self-225920e2665631ee62b7fbe95291c6ac9e1c62142a2bc469a623623a6c18a705.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/basic_cityscape/stage3.self-d849334bedcf13dec8fb3da9f57078b783809e1a25dfc733da271108516fb213.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/basic_cityscape/stage4.self-566ff4fe09aeeee06c9bfca2d5a81fc52bad7f964d150d6025e854e6a9a8c2de.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/clearRect.self-9e82ca8aa93793f04e73caa7f25eaf5e8c815cbe718ac5f4747de25ef19efce9.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/coordinates.self-4821f9b9bad6785349895eef0fd2998882879f8d57aff2f232eb8b4d961203f1.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/create_linear_gradient.self-ab2b095d11ee8db1ddc55bb8a6d8ddb228a26f658da8dd84b46aefc823d3dd84.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/fill_rect.self-4bb525e22a290e2ae4aa8446082bdcd7168ea5c515f27a3b3b8b6d439760ea8a.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/fill_style.self-6d153ccc75d0aa54db66acd06e950248f8cabe7184d1789400272825d0648764.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_birds/stage1.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_square/stage1.self-c6f7b80fdf091aa2053199c3ae3ca0e4ee0d4ca130eee193fd12abb9efc6ac13.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_square/stage2.self-f3be52b4d5e0779fad68ca6eedfc18c2e968291aafcd14becd90382199594552.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_square/stage3.self-bc2d99e542912e56ba8e0f5ed6719e1ee189b5a6cbcb5cea14e25b51c343e72c.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_square/stage4.self-7ca1693fdaf6615b4f33fdec5f1a25573d9a2aeeec983ca01396c526289972da.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_square/stage5.self-ca777df2cf099ea395e9672fc353531bdc3b78962c0b6cb414abe4b161624434.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/for_loops.self-6ea947c621baba5fe10d587860ab777038544953934ba8d15ccea3fff8128ea2.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/functions.self-d002fbef8abc3e970526900bc8987e0e6b43e4caedda60e4ea2318eae2cc0330.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/granular_basic_cityscape/stage1.self-1f92c5225b6edc5e126c3e684177b06825bffe63f78269fc846d2c7e397cd8cd.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/granular_basic_cityscape/stage2.self-fd2104e2d7b7ba5f43d38ef8d7af74ce58cfd9bb569d2f5a620b423729fa3257.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/granular_basic_cityscape/stage3.self-e2064f6932bc938d199b51dc1ba885fc1f3b2913935b7bdb8203011970326dbf.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/granular_basic_cityscape/stage4.self-611052ea22dac28d9a24fc6ecb7c680cd07e073d394dc8a34237a2b674d846ad.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/if_statements.self-101ecc2cff3aa907c15c9f716abadc39aecfb0d8ede7e9f6ce462da649f1294b.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/line_to.self-65410ae951aab7cdda49956ec4aa794d97db0360507ea427d9e41ef840d88d93.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/objects.self-cf5de257b5741f14d31d462d8f3634e6965f23199795b5c44e433ded6515b856.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/random.self-e3526158091bc0c29fb3eaecbfa5bd813ee77bf67b2449758af5a4608bd8397b.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/round.self-8f4f7fa74c9157dc1707d118675f7e35d4621225571a950953278131b01a5022.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/save.self-ba90c232d56f796645e264833860b2cbcb639bb0e37772b06ea84198141d8bec.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/scale.self-8bedfd1625ced565d0fd9cdc69c9693cd07a039860dbee59df8fc4eb524b0d70.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/switch_statements.self-9fdab32aed464bc617220d4c4fbce43b07887fe98eca5de2828efb6e05c74d5c.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/translate.self-16962e3a7636c88e58d6a2bf9f63a8e5c65302badec269e70a30a97bfbc4c8ad.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/variables.self-4562a8743966906ee7fb58792fd51e5aac5203a5f64b393175caa98ba33ddedc.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/while_loops.self-d6177003c6f9f97f79cb8c63956ace41e225e85175095da98c102ebd5432f7e3.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/app/canvas.self-429f6c3eb7215ea53ffe08598331778858aa202b6c9cdf18775ee1623316198a.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/app/editor.self-9e5c451af8ae6c3ff6a08411cac60edb597f624b02590ee8996eb3a471ab288a.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/app/files.self-16fff0bc3c9a315d22413e3b6a090fb8ef8f5f1257b42dade438f57a0de1f134.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/app/progress.self-4503399481b829c39ff08c2032105131126b8afc066ef831d3d7500a47be943f.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/test/code.self-b7e09b8368223e2f67b6cb5de7ba6bd254c25bc4fad20087b54d421f6a6d2deb.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/test/image_comparison.self-83be79c1bfdac13ff2c69e6916a326f2698035d7381c28f12e44637de7618bac.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/test/point.self-e1435fcb5c66e2107d91d34c16e06e6c0dd8d06286396d3d5b3b05c22989d9b2.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/navigation.self-0c773a2eba044489c780e82748330585e0f6b5e96bdb95dac6f0886cdfd75175.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/referenceModal.self-4ba25626378a146e8d2a7ae7edd72600ddef60371b98f42b0c3555b56cd02ff9.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/application.self-4d37d7bcf4b0b32507438063ae47ba88dd0178863f7c7a2c7125b221eefea772.js?body=1" data-turbolinks-track="reload"></script>
</head>
<body>
<nav class='navbar navbar-dark navbar-fixed-top bg-inverse'>
<button aria-controls='navbar' aria-expanded='false' aria-label='Toggle navigation' class='navbar-toggler hidden-sm-up' data-target='#navbar' data-toggle='collapse' type='button'></button>
<a class='navbar-brand' href='../../../index.html'>
Drawing In Code:
<small>An exploration of artistic observation and computational thinking</small>
</a>
</nav>

<div class='container-fluid'>
<div class='row'>
<div class='col-md-3 col-lg-2 sidebar'>
<ul class='nav nav-sidebar'>
<li class='section'>
<a class="section_link" href="../../../index.html">Home</a>
</li>
</ul>
<ul class='nav nav-sidebar' style='display: none;'>
<li class='section'>
<a class='section_link' data-section='reference' href='#'>
Reference
</a>
<ul class='collapse nav nav-sidebar' id='reference'>
<li class='section mt-1'>
<strong>Context2D</strong>
</li>
<li>
<a href="../../reference/clear_rect/index.html">clearRect()</a>
<span class='tag tag-default'>
<small class='clear_rect'>0 / 2</small>
</span>
<div class='reference-modal-content' id='reference-modal-clear_rect'>
<div class='title'>context.clearRect()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.clearRect(x, y, width, height) will clear a rectangle starting
at (x, y) and clearing to the right width and down height.
</p>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>context.fillStyle = '#FF0000';&#x000A;context.fillRect(0, 0, canvas.width, canvas.height);&#x000A;&#x000A;context.clearRect(40, 20, 20, 100);&#x000A;context.clearRect(60, 60, 20, 20);&#x000A;context.clearRect(80, 20, 20, 100);&#x000A;&#x000A;context.clearRect(120, 20, 60, 20);&#x000A;context.clearRect(140, 40, 20, 60);&#x000A;context.clearRect(120, 100, 60, 20);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/clear_rect/reference-70cf88df0b9a8db2c33a8048af8493be9efdca18dd8ed4b2756cb0de8d8993af.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/fill_rect/index.html">fillRect()</a>
<span class='tag tag-default'>
<small class='fill_rect'>0 / 6</small>
</span>
<div class='reference-modal-content' id='reference-modal-fill_rect'>
<div class='title'>context.fillRect()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.fillRect(x, y, width, height) will draw a rectangle starting
at (x, y) and filling the area "width" to the right and "height" down.
</p>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>context.fillRect(50, 50, 300, 200);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/fill_rect/reference-ec68654dd34b051ccadd579a7b7b065ab4fa1eff1991e3d8df56cf72be3dee37.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/fill_style/index.html">fillStyle</a>
<span class='tag tag-default'>
<small class='fill_style'>0 / 3</small>
</span>
<div class='reference-modal-content' id='reference-modal-fill_style'>
<div class='title'>context.fillStyle</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.fillStyle will set the color for all future fills such as
context.fillRect(). It's important to note theat context.fillStyle
is not a method, it is an attribute. You set it like so:
</p>
<pre class='mb-2'><code>context.fillStyle = 'red';&#x000A;</code></pre>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>context.fillStyle = 'rgb(0,255,0)';&#x000A;context.fillRect(50, 50, 100, 200);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/fill_style/reference-8b359c7e565a86e657117d488129208cb37d2b93ac988ee482ddaf063385e12e.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/line_to/index.html">lineTo()</a>
<span class='tag tag-default'>
<small class='line_to'>0 / 6</small>
</span>
<div class='reference-modal-content' id='reference-modal-line_to'>
<div class='title'>context.lineTo()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.lineTo(x, y) creates a path from the current point - default (0,0) -
to the point (x, y). In order to see the line you must call context.stroke().
</p>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>context.beginPath();&#x000A;context.moveTo(50, 50);&#x000A;context.lineTo(100,100);&#x000A;context.lineTo(150, 50);&#x000A;context.lineTo(200, 100);&#x000A;context.stroke();&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/line_to/reference-2c3b4d87c54a374ee06ac132f850d07869ed961fac25769a9e1309faf9709371.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/save/index.html">save() / restore()</a>
<span class='tag tag-default'>
<small class='save'>0 / 5</small>
</span>
<div class='reference-modal-content' id='reference-modal-save'>
<div class='title'>context.save()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.save() saves all of the properties of the context. Then, when you call
context.restore() it will reset all changes to the context you've made.
</p>
<p>
This code will produce the image below (note how the second rectangle is black
and closer to the original origin despite calling translate and setting the
fillStyle earlier):
</p>
<pre class='mb-2'><code>context.save();&#x000A;context.translate(100,50);&#x000A;context.fillStyle = 'red';&#x000A;context.fillRect(10, 10, 25, 25);&#x000A;context.restore();&#x000A;&#x000A;context.fillRect(10, 10, 25, 25);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/save/reference-cfdb7b48454c0b82fb5105cf7a1228776bbee579585d77bf2b7cdeab9f8eb32a.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/scale/index.html">scale()</a>
<span class='tag tag-default'>
<small class='scale'>0 / 7</small>
</span>
<div class='reference-modal-content' id='reference-modal-scale'>
<div class='title'>context.scale()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.scale(percentX, percentY) scales the x and y coordinates of the context, making drawings
larger or smaller.
</p>
<p>
This code will produce the image below (note that all rectangles are defined to be the same size
in the code are drawn in different sizes due to the scale of the context):
</p>
<pre class='mb-2'><code>context.fillRect(25,25,25,25);&#x000A;context.scale(2, 1);&#x000A;context.fillRect(75,25,25,25);&#x000A;context.scale(0.5, 1);&#x000A;context.fillRect(150,25,25,25);&#x000A;context.scale(2, 2);&#x000A;context.fillRect(300,25,25,25);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/scale/reference-0569c769850c52c53953d385626946099b407d1037f93af347311149e3a2fec6.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/translate/index.html">translate()</a>
<span class='tag tag-default'>
<small class='translate'>0 / 6</small>
</span>
<div class='reference-modal-content' id='reference-modal-translate'>
<div class='title'>context.translate()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.translate(x, y) shifts the origin of the context (where the (0,0) point is)
right by x and down by y. This allows you to draw execute multiple commands in a specific
area of the context more easily.
</p>
<p>
This code will produce the image below (note how the fillRect commands are
relative to the translation point (100,100)):
</p>
<pre class='mb-2'><code>context.translate(50,50);&#x000A;context.fillStyle = 'red';&#x000A;context.fillRect(0, 0, 100, 100);&#x000A;context.fillStyle = 'green';&#x000A;context.fillRect(10, 10, 25, 25);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/translate/reference-19fc53169ce0da0d057fb00b05eecfb3fc88513d1fa46cf4aceaa8fa19f51c26.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li class='section mt-1'>
<strong>Math</strong>
</li>
<li>
<a href="../../reference/round/index.html">round() / floor() / ceil()</a>
<span class='tag tag-default'>
<small class='round'>0 / 3</small>
</span>
<div class='reference-modal-content' id='reference-modal-round'>
<div class='title'>Math.round() / Math.floor() / Math.ceil()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Math.round(), Math.floor() and Math.ceil() will round a number to an integer.
Math.floor() will always round down while Math.ceil() will always round up.
Math.round() will round to the closest integer, either up or down.
</p>
</div>
<div class='offset-xs-1 col-xs-10'>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/floor/visual1-9edc722b188f28c702178c13d60cbec037d2e4159d2b7b5f7782a0be2dd5f653.png" alt="Visual1" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/random/index.html">random()</a>
<span class='tag tag-default'>
<small class='random'>0 / 4</small>
</span>
<div class='reference-modal-content' id='reference-modal-random'>
<div class='title'>Math.random()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Math.random() will produce a random decimal betweek 0 and 1. Calling it many
times will produce a different random number each time.
</p>
<p>
Often you will multiple Math.random() by another number to get a random
integer larger than 1. You may also call Math.floor() or Math.ceil() on the result
to get an rounded integer.
</p>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/random/reference-d1ee7adb1a0544e928f64c175595c9f081740954db0ae3f889f0627b4034c642.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
</ul>
</li>
</ul>
<ul class='nav nav-sidebar' style='display: none;'>
<li class='section'>
<a class='section_link' data-section='concepts' href='#'>
Concepts
</a>
<ul class='collapse nav nav-sidebar' id='concepts'>
<li>
<a href="../../concepts/variables/index.html">Variables</a>
<span class='tag tag-default'>
<small class='variables'>0 / 5</small>
</span>
<div class='reference-modal-content' id='reference-modal-variables'>
<div class='title'>Variables</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
A variable allows you to store information to use or change later.
</p>
</div>
<div class='offset-xs-1 col-xs-10'>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/variables/reference-b8e07ae4cdc5e13b2ee681381d7fa203f8442ff2e8abeb1cf4012cfb427439db.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/for_loops/index.html">For Loops</a>
<span class='tag tag-default'>
<small class='for_loops'>0 / 6</small>
</span>
<div class='reference-modal-content' id='reference-modal-for_loops'>
<div class='title'>For Loops</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
For-loops allow you to repeat code over and over again, potentially
adjusting the code a little bit each time.
</p>
<p>
The following code will produce the picture below:
</p>
<pre class='mb-2'><code>for (var i=1; i<10; ++i) {&#x000A;  context.fillRect(10 * i, 75 - (5 * i), 10 * i, 10 * i);&#x000A;}&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/for_loops/reference-ab4edc41708c315c5bc65d0ca07c1d49061a8185eb1420dbb6a056fa1be194bd.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/while_loops/index.html">While Loops</a>
<span class='tag tag-default'>
<small class='while_loops'>0 / 3</small>
</span>
<div class='reference-modal-content' id='reference-modal-while_loops'>
<div class='title'>While Loops</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
While-loops allow you to repeat code over and over again until a condition is met.
</p>
<p>
The following code will produce the picture below:
</p>
<pre class='mb-2'><code>var i = 10;&#x000A;while (i < 200) {&#x000A;  context.fillRect(5, 5, i, 50);&#x000A;  i += 10;&#x000A;}&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/while_loops/reference-b71bb24ae903b89143b68f3a561a455d71ca8c08674b34a2d9ffbde1753fc005.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/coordinates/index.html">Coordinates</a>
<span class='tag tag-default'>
<small class='coordinates'>0 / 3</small>
</span>
<div class='reference-modal-content' id='reference-modal-coordinates'>
<div class='title'>The Coordinate System</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
The coordinate system consists of X and Y values starting at (0, 0) in the upper left corner.
</p>
<p>
As you move down the canvas Y gets larger. As you move right on the canvas X gets larger.
</p>
<p>
So the point (100, 50) means you move right 100 and down 50.
</p>
<p class='text-xs-center'>
<img class="img-fluid" src="../../../assets/lessons/coordinates/reference-1875ea0cb51a1c7ed92a016a2256ba53d9b3f7820a9feaa679521c14af4e7acd.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/functions/index.html">Functions</a>
<span class='tag tag-default'>
<small class='functions'>0 / 5</small>
</span>
<div class='reference-modal-content' id='reference-modal-functions'>
<div class='title'>Functions</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Functions allow you to create chunks of code that can be called with
different parameters.
</p>
<p>
The following code will produce the picture below:
</p>
<pre class='mb-2'><code>function fillColorRect(x, y, w, h, color) {&#x000A;  context.save();&#x000A;  context.fillStyle = color;&#x000A;  context.fillRect(x, y, w, h);&#x000A;  context.restore();&#x000A;}&#x000A;&#x000A;fillColorRect(50, 50, 50, 50, 'red');&#x000A;fillColorRect(150, 50, 50, 50, 'blue');&#x000A;fillColorRect(250, 50, 50, 50, 'green');&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/functions/reference-2d2a07b0286e84d953685386201fe7e0bc20198460907e83c7895681f6b37a45.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/switch_statements/index.html">Switch Statements</a>
<span class='tag tag-default'>
<small class='switch_statements'>0 / 4</small>
</span>
<div class='reference-modal-content' id='reference-modal-switch_statements'>
<div class='title'>Switch Statements</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Switch statements allow you to perform different code depending on
the value of a variable.
</p>
<p>
The following code will produce the picture below (the switch statement
only performs the code inside of case 2 because "i" is set to 2):
</p>
<pre class='mb-2'><code>var i = 2;&#x000A;switch (i) {&#x000A;  case 1:&#x000A;    context.fillStyle = 'red';&#x000A;    break;&#x000A;  case 2:&#x000A;    context.fillStyle = 'yellow';&#x000A;    break;&#x000A;  case 3:&#x000A;    context.fillStyle = 'blue';&#x000A;    break;&#x000A;}&#x000A;context.fillRect(50, 50, 100, 50);&#x000A;&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/switch_statements/reference-3ab4709f6beedfca8a197ba64c75c9604abf7ccdb78c9adc16cf035c60914e8b.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/set_interval/index.html">setInterval()</a>
<div class='reference-modal-content' id='reference-modal-set_interval'>
<div class='title'>setInterval()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
setInterval() allows you to execute code at specified intervals. It
is frequently used to create animations.
</p>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>var index = 0;&#x000A;function count() {&#x000A;  context.font = "20px serif";&#x000A;  context.textAlign = 'center';&#x000A;  context.fillText(index, canvas.width / 2, canvas.height / 2);&#x000A;}&#x000A;setInterval(count, 1000)&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/set_interval/reference-a47ff17199d8182591ccb0d45fa57147ee1136677cff7955671c6a01337479fa.gif" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/event_listeners/index.html">Event Listeners</a>
<div class='reference-modal-content' id='reference-modal-event_listeners'>
<div class='title'>Event Listeners</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Event listeners allow you to "listen" for an event, such as a click, on an element
in your html.
</p>
<p>
A full list of events can be found here:
<a target="_blank" href="https://www.tutorialspoint.com/html5/html5_events.htm">HTML5 Events</a>
</p>
<p>This code will produce the image below (if you were to click and draw the letters on the canvas):</p>
<pre class='mb-2'><code>canvas.addEventListener('mousemove', function(e) {&#x000A;  if (e.buttons === 0) return;&#x000A;  context.fillRect(e.layerX - 3, e.layerY - 3, 7, 7);&#x000A;});&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/event_listeners/reference-e166d58e874cfbbeb51fb29e622c9bf89d5c7a4aec6319d3953c94db43af1b0c.gif" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
</ul>
</li>
</ul>
<ul class='nav nav-sidebar'>
<li class='section my-1'>
<a class='section_link' data-section='animated_cityscape' href='#'>Animated Cityscape</a>
<ul class='collapse in nav nav-sidebar' id='animated_cityscape'>
<li class='active'>
<a href="index.html">Stage 1</a>
<span class='tag tag-default'>
<small class='animated_cityscape_stage1'>0 / 7</small>
</span>
<li class='page_section row small' id='page_section1'>
<a style="margin-left: 21px; width: 6.5em; display: inline-block;" href="#section1">Section 1</a>
<span class='tag tag-success hidden-xs-up'>&#10003;</span>
</li>
<li class='page_section row small' id='page_section2'>
<a style="margin-left: 21px; width: 6.5em; display: inline-block;" href="#section2">Section 2</a>
<span class='tag tag-success hidden-xs-up'>&#10003;</span>
</li>
<li class='page_section row small' id='page_section3'>
<a style="margin-left: 21px; width: 6.5em; display: inline-block;" href="#section3">Section 3</a>
<span class='tag tag-success hidden-xs-up'>&#10003;</span>
</li>
<li class='page_section row small' id='page_section4'>
<a style="margin-left: 21px; width: 6.5em; display: inline-block;" href="#section4">Section 4</a>
<span class='tag tag-success hidden-xs-up'>&#10003;</span>
</li>
<li class='page_section row small' id='page_section5'>
<a style="margin-left: 21px; width: 6.5em; display: inline-block;" href="#section5">Section 5</a>
<span class='tag tag-success hidden-xs-up'>&#10003;</span>
</li>
<li class='page_section row small' id='page_section6'>
<a style="margin-left: 21px; width: 6.5em; display: inline-block;" href="#section6">Section 6</a>
<span class='tag tag-success hidden-xs-up'>&#10003;</span>
</li>
<li class='page_section row small' id='page_section7'>
<a style="margin-left: 21px; width: 6.5em; display: inline-block;" href="#section7">Section 7</a>
<span class='tag tag-success hidden-xs-up'>&#10003;</span>
</li>
</li>
<li>
<a href="../stage2/index.html">Stage 2</a>
<span class='tag tag-default'>
<small class='animated_cityscape_stage2'>0 / 6</small>
</span>
</li>
<li>
<a href="../stage3/index.html">Stage 3</a>
<span class='tag tag-default'>
<small class='animated_cityscape_stage3'>0 / 6</small>
</span>
</li>
<li>
<a href="../stage4/index.html">Stage 4</a>
<span class='tag tag-default'>
<small class='animated_cityscape_stage4'>0 / 6</small>
</span>
</li>
</ul>
<ul class='nav nav-sidebar' id='quick-reference'>
<li class='section small mt-3'>
<strong>Quick Reference</strong>
</li>
<li class='small '>
<a class="reference-link" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="save" href="../save/index.html">save() / restore()</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="translate" href="../translate/index.html">translate()</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="line_to" href="../line_to/index.html">lineTo()</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="random" href="../random/index.html">random()</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="round" href="../round/index.html">round() / floor() / ceil()</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="scale" href="../scale/index.html">scale()</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="create_linear_gradient" href="../create_linear_gradient/index.html">createLinearGradient()</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="set_interval" href="../set_interval/index.html">setInterval()</a>
</li>
<li class='section small mt-1'>
<strong>Concepts</strong>
</li>
<li class='small '>
<a class="reference-link" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="variables" href="../variables/index.html">Variables</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="functions" href="../functions/index.html">Functions</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="for_loops" href="../for_loops/index.html">For Loops</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="switch_statements" href="../switch_statements/index.html">Switch Statements</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="while_loops" href="../while_loops/index.html">While Loops</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="if_statements" href="../if_statements/index.html">If Statements</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="event_listeners" href="../event_listeners/index.html">Event Listeners</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="objects" href="../objects/index.html">Objects</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="arrays" href="../arrays/index.html">Arrays</a>
</li>
</ul>
</li>
</ul>
<ul class='nav nav-sidebar hidden-xs-up'>
<li class='section'>
<a class='section_link' data-section='experimental' href='#'>
All
</a>
</li>
<ul class='nav nav-sidebar'>
<li class='section small'>
<strong>Active</strong>
<li class='small '>
<a href="../../basic_cityscape/stage1/index.html">Basic Cityscape</a>
</li>
</li>
<li class='section small mt-2'>
<strong>Experimental</strong>
<li class='small '>
<a href="../../snake_game/stage1/index.html">Snake Game</a>
</li>
<li class='small '>
<a href="../../flappy_square/stage1/index.html">Flappy Square</a>
</li>
<li class='small '>
<a href="../../flappy_birds/stage1/index.html">Flappy Birds</a>
</li>
<li class='small '>
<a href="../../granular_basic_cityscape/stage1/index.html">Basic Cityscape</a>
</li>
<li class='small '>
<a href="index.html">Animated Cityscape</a>
</li>
</li>
</ul>
</ul>

</div>
<div class='col-xs-12 offset-md-3 col-md-9 offset-lg-2 col-lg-10 main'>
<div class='page' id='animated_cityscape_stage1'>
<h1>
Stage 1
</h1>
<div class='description row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Overview
</h2>
<figure class='float-xs-right px-2'>
<img class="img-fluid" src="../../../assets/lessons/animated_cityscape/stage1/overviewVisual1-2469635316ba4015eb2eafa5988fce8e4fbac50218723198252cd5ca028d5941.png" alt="Overviewvisual1" />
</figure>
<p>
In the Basic Cityscape Challenge, we drew three rows of randomly-generated
buildings, creating a 3D effect by drawing the buildings in the back smaller
and darker.
</p>
<p>
In the first stage of the Animated Cityscape Challenge, we draw the
sky behind the buildings, changing the color of the sky to simulate nightfall.
</p>
</div>
</div>
</div>
</div>
<div class='example row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Review the Basic Cityscape Challenge
</h2>
<p>
Because we are extending the program for the Basic Cityscape Challenge to
animate the drawing, it's important to understand how that program works.
</p>
<p>
We start by drawing a gray rectangle (color <code>'#CCCCCC'</code>) for
the ground beneath the buildings. Then, we use the <code>drawBuildingRow()</code>
function to draw three rows of buildings.
</p>
<pre><code>context.fillStyle = '#CCCCCC';&#x000A;context.fillRect(0, 220, canvas.width, canvas.height - 220);&#x000A;&#x000A;drawBuildingRow(0, 280, 0.6);&#x000A;drawBuildingRow(0, 300, 0.8);&#x000A;drawBuildingRow(0, 320, 1.0);</code></pre>
<p>
The first row of buildings is positioned at (0, 280) and drawn at 60% scale,
the second row of buildings is positioned at (0, 300) and drawn at 80% scale, and
the third row of buildings is positioned at (0, 320) and drawn at 100% scale.
</p>
<p>
Inside the <code>drawBuildingRow()</code> function, we use the <code>scale</code>
parameter to calculate the color of the buildings in the row. The smaller the scale,
the darker the buildings. Then, we use a while loop to draw buildings the width of the
canvas. To draw a building, we randomly generate the number of office units per floor,
the number of floors, the type of windows, and the type of roof for the building and
pass those values into the <code>drawBuilding()</code> function.
</p>
<p>
The <code>randomInteger()</code> function is used to generate random integers,
switch statements inside the <code>drawWindow()</code> and <code>drawRoof()</code>
functions are used to draw the four different types of windows and roofs, and
nested for loops are used to draw windows in each office unit in each building.
</p>
<p>
Please make sure you fully understand the program in the example below before continuing on in
this challenge. If you need help, visit the Basic Cityscape Challenge and its relevant lessons.
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="for_loops" href="../for_loops/index.html">For Loops</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="switch_statements" href="../switch_statements/index.html">Switch Statements</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="while_loops" href="../while_loops/index.html">While Loops</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="random" href="../random/index.html">random()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="scale" href="../scale/index.html">scale()</a>
</p>

</div>
<div class='col-xs-12'>
<div class='interactive row py-1'>
<div class='code-editor col-xs-12' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_example1_editor'>var canvas = document.getElementById('animated_cityscape_stage1_example1');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;context.save();&#x000A;context.fillStyle = '#CCCCCC';&#x000A;context.fillRect(0, 220, canvas.width, canvas.height - 220);&#x000A;&#x000A;drawBuildingRow(0, 280, 0.6);&#x000A;drawBuildingRow(0, 300, 0.8);&#x000A;drawBuildingRow(0, 320, 1.0);&#x000A;&#x000A;context.restore();&#x000A;&#x000A;function drawBuildingRow(rowX, groundY, scale) {&#x000A;  context.save();&#x000A;  context.translate(rowX, groundY);&#x000A;  context.scale(scale, scale);&#x000A;  &#x000A;  var c = Math.round(153 * scale);&#x000A;  var buildingColor = 'rgb(' + c + ', ' + c + ', ' + c + ')';&#x000A;  var windowColor = 'rgb(102, 102, 102)';&#x000A;  &#x000A;  var x = 0;&#x000A;  while (x < canvas.width / scale) {&#x000A;    var units = randomInteger(4, 10);&#x000A;    var floors = randomInteger(6, 20);&#x000A;    var windowType = randomInteger(0, 3);&#x000A;    var roofType;&#x000A;    &#x000A;    if (units > 8) {&#x000A;			roofType = randomInteger(0, 1);&#x000A;		} else if (units > 6) {&#x000A;			roofType = randomInteger(0, 2);&#x000A;		} else {&#x000A;			roofType = randomInteger(0, 3);&#x000A;		}&#x000A;    &#x000A;    var w = 16 * units + 8;&#x000A;    var h = 16 * floors + 8;&#x000A;    &#x000A;    drawBuilding(x, 0, w, h, units, floors, windowType, roofType, buildingColor, windowColor);&#x000A;    x = x + w + 12;&#x000A;  }&#x000A;  &#x000A;  context.restore();&#x000A;}&#x000A;&#x000A;function drawBuilding(leftX, groundY, w, h, units, floors, windowType, roofType, buildingColor, windowColor) {&#x000A;  var x = leftX;&#x000A;  var y = groundY - h;&#x000A;  &#x000A;  context.save();&#x000A;  context.translate(x, y);&#x000A;  context.fillStyle = buildingColor;&#x000A;  context.fillRect(0, 0, w, h);&#x000A;  drawRoof(w, roofType);&#x000A;  &#x000A;  context.translate(4, 4);&#x000A;  context.fillStyle = windowColor;&#x000A;  &#x000A;  for (var i = 0; i < floors; i = i + 1) {&#x000A;    context.save();&#x000A;    &#x000A;    for (var j = 0; j < units; j = j + 1) {&#x000A;      drawWindow(windowType);&#x000A;      context.translate(16, 0);&#x000A;    }&#x000A;    &#x000A;    context.restore();&#x000A;    context.translate(0, 16);&#x000A;  }&#x000A;  &#x000A;  context.restore();&#x000A;}&#x000A;&#x000A;function drawWindow(windowType) {&#x000A;  context.save();&#x000A;  &#x000A;  switch (windowType) {&#x000A;		case 0:&#x000A;			context.fillRect(4, 2, 8, 10);&#x000A;			break;&#x000A;		&#x000A;		case 1:&#x000A;			context.fillRect(2, 3, 5, 8);&#x000A;			context.fillRect(9, 3, 5, 8);&#x000A;			break;&#x000A;		&#x000A;		case 2:&#x000A;			context.fillRect(0, 3, 16, 8);&#x000A;			break;&#x000A;		&#x000A;		case 3:&#x000A;			context.fillRect(5, 1, 6, 14);&#x000A;			break;&#x000A;	}&#x000A;  &#x000A;  context.restore();&#x000A;}&#x000A;&#x000A;function drawRoof(w, roofType) {&#x000A;  context.save();&#x000A;  &#x000A;  switch(roofType) {&#x000A;		case 0:&#x000A;			// draw nothing&#x000A;			break;&#x000A;		&#x000A;		case 1:&#x000A;			context.fillRect(8, -16, w - 16, 16);&#x000A;			break;&#x000A;		&#x000A;		case 2:&#x000A;			context.fillRect(8, -24, w - 16, 24);&#x000A;			context.fillRect((w - 32) / 2, -48, 32, 24);&#x000A;			context.fillRect((w - 8) / 2, -80, 8, 56);&#x000A;			break;&#x000A;		&#x000A;		case 3:&#x000A;			context.beginPath();&#x000A;			context.moveTo(w / 2, -80);&#x000A;			context.lineTo(w / 2 + 16, -16);&#x000A;			context.lineTo(w / 2 - 16, -16);&#x000A;			context.closePath();&#x000A;			context.fill();&#x000A;			context.fillRect((w - 64) / 2, -16, 64, 16);&#x000A;			break;&#x000A;	}&#x000A;  &#x000A;  context.restore();&#x000A;}&#x000A;&#x000A;function randomInteger(min, max) {&#x000A;  return (min + Math.floor((max - min + 1) * Math.random()));&#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-12 pt-2'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_example1'></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class='example row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Draw the Sky Behind the Buildings
</h2>
<p>
The sky behind the buildings is not a solid color. During the day, the sky is
white along the horizon and bluer higher up. At night, the sky is gray along the
horizon and darker higher up. And as the sun sets, the sky along the horizon
turns red.
</p>
<p>
To draw the sky, we use a linear gradient. A linear gradient smoothly transitions
from one color to another, such as white to blue or gray to dark gray. In
this example, we create a linear gradient using the <code>createLinearGradient()</code>
method and assign it to a variable named <code>gradient</code>:
</p>
<pre><code>var gradient = context.createLinearGradient(40, 0, 360, 0);</code></pre>
<p>
We create a linear gradient by passing the <code>createLinearGradient()</code> method
the coordinates for the gradient's start position and end position. Because the two points,
(40, 0) and (360, 0), form a horizontal line, the linear gradient is horizontal. It starts
at x = 40 and ends at x = 360. The y-coordinates of the two points in a horizontal linear
gradient don't make a difference as long as they are the same.
</p>
<p>
The next step is setting the colors in the gradient:
</p>
<pre><code>gradient.addColorStop(0, 'Red');&#x000A;gradient.addColorStop(0.6, 'Blue');&#x000A;gradient.addColorStop(1, 'Black');</code></pre>
<p>
This sets the color in the gradient at x = 40 (position <code>0</code>) to <code>'Red'</code>
and the color at x = 360 (position <code>1</code>) to <code>'Black'</code>. We also set
the color at x = 232 (position <code>0.6</code>) to <code>'Blue'</code>. This position is 60%
of the way from position <code>0</code> to position <code>1</code>.
</p>
<p>
Finally, we assign the linear gradient stored in the variable <code>gradient</code> to the
<code>context.fillStyle</code> property and use the <code>context.fillRect()</code> method to
draw a filled rectangle.
</p>
<pre><code>context.fillStyle = gradient;&#x000A;context.fillRect(40, 40, 320, 240);</code></pre>
<p>
Between position <code>0</code> and position <code>0.6</code>, the color filling the rectangle
changes from <code>'Red'</code> to <code>'Blue'</code>. Between position <code>0.6</code>
and position <code>1</code>, the color changes from <code>'Blue'</code> to <code>'Black'</code>.
</p>
<p>
Change the colors in the gradient, change the position of the middle color stop, or add another
color stop with a position between <code>0</code> and <code>1</code> to see what happens. To learn more
about linear gradients, visit the
<a class="reference-link" data-slug="create_linear_gradient" href="../create_linear_gradient/index.html">createLinearGradient()</a>
lesson.
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="create_linear_gradient" href="../create_linear_gradient/index.html">createLinearGradient()</a>
</p>

</div>
<div class='col-xs-12'>
<div class='interactive row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_example2_editor'>var canvas = document.getElementById('animated_cityscape_stage1_example2');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var gradient = context.createLinearGradient(40, 0, 360, 0);&#x000A;&#x000A;gradient.addColorStop(0, 'Red');&#x000A;gradient.addColorStop(0.6, 'Blue');&#x000A;gradient.addColorStop(1, 'Black');&#x000A;&#x000A;context.fillStyle = gradient;&#x000A;context.fillRect(40, 40, 320, 240);&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_example2'></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge1'>
<div class='col-xs-12'>
<div class='row pb-2'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 1
</h2>
<figure class='float-xs-right px-2'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/animated_cityscape/stage1/challenge1Visual1-58a471c623b0b21a4ffaed5bd469a68cc54d6901a6bcd8d969bfb12c3b0d2d2a.png" alt="Challenge1visual1" />
<figcaption class='text-xs-center small'>What your drawing should look like</figcaption>
</figure>
<p>
Declare a variable named <code>horizonY</code> and assign it the value
<code>canvas.height - 100</code>. This sets the y-coordinate of the horizon
100 pixels above the bottom of the canvas.
</p>
<p>
Define a function named <code>drawSky()</code>. Inside the function, create
a vertical linear gradient so position <code>0</code> is at the horizon and
position <code>1</code> is 300 pixels above the horizon. Note that the y-coordinate
of position <code>1</code> may be negative and not visible on the canvas.
</p>
<p>
Set the color in the gradient at position <code>0</code> to <code>'rgb(255, 85, 85)'</code>,
the color at position <code>0.3</code> to <code>'rgb(102, 119, 153)'</code>, and the color at
position <code>1</code> to <code>'rgb(68, 85, 119)'</code>.
</p>
<p>
Fill a rectangle with the gradient positioned at (0, 0) going down to the horizon and
across the width of the canvas.
</p>
<p>
Since the <code>drawSky()</code> function is setting the <code>context.fillStyle</code>
property, make sure to save and restore the drawing state at the start and end of the function.
</p>
<p>
Then, use the <code>drawSky()</code> function to draw the sky. This is approximately how the
sky will look at 6:20 pm once the cityscape is animated.
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="save" href="../save/index.html">save() / restore()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="create_linear_gradient" href="../create_linear_gradient/index.html">createLinearGradient()</a>
</p>

</div>
</div>
<div class='row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_challenge1_editor'>var canvas = document.getElementById('animated_cityscape_stage1_challenge1');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;// DECLARE AND INITIALIZE THE horizonY VARIABLE HERE&#x000A;&#x000A;// CALL THE drawSky() FUNCTION HERE TO DRAW THE SKY&#x000A;&#x000A;// DEFINE THE drawSky() FUNCTION HERE&#x000A;// INSIDE THE drawSky() FUNCTION, CREATE A VERTICAL LINEAR GRADIENT&#x000A;// FROM THE HORIZON TO A POINT 300 PIXELS ABOVE THE HORIZON.&#x000A;// SET THE COLORS IN THE GRADIENT.&#x000A;// USE THE GRADIENT TO FILL A RECTANGLE POSITIONED AT (0, 0) THAT GOES&#x000A;// DOWN TO THE HORIZON AND ACROSS THE WIDTH OF THE CANVAS.&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_challenge1'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
<div class='example row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Change Ground and Sky Colors Over Time
</h2>
<p>
The colors used to draw the sky in Challenge 1 are the colors of the sky at
6:20 pm in the animated cityscape. However, the colors of the sky are slightly
different at 6:10 pm and 6:30 pm. Because we change the color of the ground and
sky forty times between 5:00 pm and 7:00 pm, we need an easy way to calculate
these colors automatically.
</p>
<p>
In this example, we use two for loops to draw two rows of rectangles. The first
for loop uses the variable <code>i</code> as its counter. Inside the for loop,
we use an if statement to calculate the height of the rectangle depending on the
value of the counter. Note how the height of the rectangle starts at 40, climbs
steadily to 100, and then levels out again. We want the ground and sky colors to
change in the same way as the sun sets.
</p>
<pre><code>if (i < 6) {&#x000A;  h = 40;&#x000A;} else if (i > 15) {&#x000A;  h = 100;&#x000A;} else {&#x000A;  h = 40 + 60 * (i - 6) / 9;&#x000A;}</code></pre>
<p>
When the program reaches the if statement, it checks the first condition. If
<code>i < 6</code>, the height of the rectangle is set to 40. If the first condition
is false, then the program checks the second condition. If <code>i > 15</code>, the
height of the rectangle is set to 100. If both conditions are false, then the program
runs the code block in the else clause and the height of the rectangle is set to the
value of <code>40 + 60 * (i - 6) / 9</code>.
</p>
<p>
The expression <code>40 + 60 * (i - 6) / 9</code> is designed to increase from 40 to
100 as <code>i</code> increases from 6 to 15. Note that <code>(6 - 6) / 9</code> = 0
when <code>i</code> is 6 and <code>(15 - 6) / 9</code> = 1 when <code>i</code> is 15.
</p>
<p>
In the second for loop, we design the expression inside the if statement so the height
of the rectangle decreases from 160 to 50 as <code>j</code> increases from 3 to 10. Can
you update the second for loop so the height of the rectangle decreases from 150 to 90
as <code>j</code> increases from 8 to 13?
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="if_statements" href="../if_statements/index.html">If Statements</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
</p>

</div>
<div class='col-xs-12'>
<div class='interactive row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_example3_editor'>var canvas = document.getElementById('animated_cityscape_stage1_example3');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var x, y, h;&#x000A;context.fillStyle = 'Crimson';&#x000A;&#x000A;for (var i = 0; i < 20; i = i + 1) {&#x000A;  if (i < 6) {&#x000A;    h = 40;&#x000A;  } else if (i > 15) {&#x000A;    h = 100;&#x000A;  } else {&#x000A;    h = 40 + 60 * (i - 6) / 9;&#x000A;  }&#x000A;  &#x000A;  x = 20 * i;&#x000A;  y = 120 - h;&#x000A;  &#x000A;  context.fillRect(x, y, 18, h);&#x000A;}&#x000A;&#x000A;context.fillStyle = 'BlueViolet';&#x000A;&#x000A;for (var j = 0; j < 20; j = j + 1) {&#x000A;  if (j < 3) {&#x000A;    h = 160;&#x000A;  } else if (j > 10) {&#x000A;    h = 50;&#x000A;  } else {&#x000A;    h = 160 - 110 * (j - 3) / 7;&#x000A;  }&#x000A;  &#x000A;  x = 20 * j;&#x000A;  y = 300 - h;&#x000A;  &#x000A;  context.fillRect(x, y, 18, h);&#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_example3'></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge2'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 2
</h2>
<figure class='float-xs-right px-2'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/animated_cityscape/stage1/challenge2Visual1-a801f31e5583567a5ac20062035949f3728ad79622f5d163d0a15d4cfed89a2d.png" alt="Challenge2visual1" />
<figcaption class='text-xs-center small'>What your drawing should look like</figcaption>
</figure>
<p>
The <code>drawGround()</code> function will draw the rectangle for the
ground using darker shades of gray as the time increases from 5:00 pm to
7:00 pm. Because we are calculating RGB values based on the time, we
start by defining the <code>rgbColor()</code> function to make it easy to
combine RGB values into a text string in 'rgb()' notation.
</p>
<p>
The <code>rgbColor()</code> function has three parameters: <code>r</code>,
<code>g</code>, and <code>b</code>. Round the values stored in the three parameters
using the <code>Math.round()</code> function and combine them into a text
string in 'rgb()' notation using the <code>+</code> operator. Then, return the text
string from the function using a return statement.
</p>
<p>
If you need help, examine the <code>drawBuildingRow()</code> and <code>randomInteger()</code>
functions in the Basic Cityscape Challenge program at the top of the page to see how we
combined values into a text string to describe a row's building color and how we returned randomly
generated integers from a function, or visit the
<a class="reference-link" data-slug="fillStyle" href="../fillStyle/index.html">fillStyle</a>
and
<a class="reference-link" data-slug="functions" href="../functions/index.html">Functions</a>
lessons.
</p>
<p>
Inside the <code>drawGround()</code> function, declare the variable <code>c</code>. We
can use this one variable to store the red, green, and blue values of the ground's color
because all three values are the same. If <code>time < 5</code>, set <code>c = 204</code>.
If <code>time > 7</code>, set <code>c = 102</code>. If <code>time</code> is between 5 and 7,
create an expression so <code>c</code> decreases from 204 to 102 as <code>time</code> increases
from 5 to 7. Pass the value of <code>c</code> into the <code>rgbColor()</code> function and
assign the color returned from the function to the <code>context.fillStyle</code> property.
Remember, <code>c</code> is the value of the red, green, and blue values of the color.
</p>
<p>
Then, use the <code>context.fillRect()</code> method to draw a rectangle from (0, <code>horizonY</code>)
to the bottom of the canvas and the width of the canvas. Make sure to save and restore the drawing
state since the <code>drawGround()</code> function is setting the <code>context.fillStyle</code> property.
</p>
<p>
Finally, set the value of <code>horizonY</code> so the y-coordinate of the horizon is 100 pixels
above the bottom of the canvas. The program should now draw slices of the ground as it gets darker
at 5:00, 5:30, 6:00, 6:30, and 7:00 pm.
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="if_statements" href="../if_statements/index.html">If Statements</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="save" href="../save/index.html">save() / restore()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="translate" href="../translate/index.html">translate()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="round" href="../round/index.html">round() / floor() / ceil()</a>
</p>

<div class='code-preview mb-2'>
<p>
<strong>Previous Challenge:</strong>
View your
<span class='code-preview-link' data-editorid='animated_cityscape_stage1_challenge1_editor'>
code from
Stage
1
Challenge
1
</span>
to use on this challenge.
</p>
<div class='code-preview-missing'>
<strong>Code Missing:</strong>
You have not yet entered any code in to the previous challenge:
Stage
1
Challenge
1
</div>
<div class='code-preview-view'>
<strong>
Stage
1
Challenge
1
</strong>
<div class='code-preview-code'></div>
</div>
</div>

</div>
</div>
<div class='row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_challenge2_editor'>var canvas = document.getElementById('animated_cityscape_stage1_challenge2');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var time;&#x000A;var horizonY; // Set the y-coordinate of the horizon so it is 100 pixels above the bottom of the canvas&#x000A;&#x000A;context.save();&#x000A;&#x000A;time = 5.0;&#x000A;drawGround(); // Draw the ground at 5:00 pm&#x000A;context.translate(72, 0);&#x000A;time = 5.5;&#x000A;drawGround(); // Draw the ground at 5:30 pm&#x000A;context.translate(72, 0);&#x000A;time = 6.0;&#x000A;drawGround(); // Draw the ground at 6:00 pm&#x000A;context.translate(72, 0);&#x000A;time = 6.5;&#x000A;drawGround(); // Draw the ground at 6:30 pm&#x000A;context.translate(72, 0);&#x000A;time = 7.0;&#x000A;drawGround(); // Draw the ground at 7:00 pm&#x000A;&#x000A;context.restore();&#x000A;&#x000A;function rgbColor(r, g, b) {&#x000A;  &#x000A;  // Create and return a text string in rgb() notation after rounding the values stored in r, g, and b&#x000A;  &#x000A;}&#x000A;&#x000A;function drawGround() {&#x000A;  &#x000A;  // Declare the variable c&#x000A;  // Use an if statement to calculate the value of c&#x000A;  // Use the rgbColor() function to get the color of the ground and assign it to the fillStyle&#x000A;  // Draw a filled rectangle from (0, horizonY) to the bottom of the canvas and the width of the canvas&#x000A;  &#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_challenge2'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 3
</h2>
<figure class='float-xs-right px-2'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/animated_cityscape/stage1/challenge3Visual1-a2523c57573dcf0f5897fab81e681251fcd86ccf735e786abd314b67c45b720e.png" alt="Challenge3visual1" />
<figcaption class='text-xs-center small'>What your drawing should look like</figcaption>
</figure>
<p>
Now we are going to update the <code>drawSky()</code> function so the
gradient used to fill the sky also changes depending on the time of day.
First, we will make the sky change from blue to dark gray. We will add
the red horizon later.
</p>
<p>
Inside the <code>drawSky()</code> function, start by declaring six
variables. To keep the function compact, we can declare multiple variables
on each line. Just separate the variables with commas and make sure to end
each line with a semicolon.
</p>
<pre><code>var r0, g0, b0;&#x000A;var r1, g1, b1;</code></pre>
<p>
The variables <code>r0</code>, <code>g0</code>, and <code>b0</code> are the
RGB values of the color at position <code>0</code> in the gradient. The variables
<code>r1</code>, <code>g1</code>, and <code>b1</code> are the RGB values of the
color at position <code>1</code>.
</p>
<p>
If <code>time < 5</code>, set <code>r0</code>, <code>g0</code>, and <code>b0</code>
to 255; and set <code>r1</code> to 102, <code>g1</code> to 153, and <code>b1</code>
to 255. And just as we can declare multiple variables on one line, we can also assign
multiple variables on one line.
</p>
<pre><code>r0 = 255, g0 = 255, b0 = 255; // The sky is white at position 0&#x000A;r1 = 102, g1 = 153, b1 = 255; // The sky is blue at position 1</code></pre>
<p>
If <code>time > 7</code>, set <code>r0</code>, <code>g0</code>, and <code>b0</code> to 102;
and set <code>r1</code>, <code>g1</code>, and <code>b1</code> to 51.
</p>
<pre><code>r0 = 102, g0 = 102, b0 = 102; // The sky is gray at position 0&#x000A;r1 = 51, g1 = 51, b1 = 51; // The sky is dark gray at position 1</code></pre>
<p>
Finally, if <code>time < 5</code> and <code>time > 7</code> are both false, create
expressions to calculate the RGB values of the colors at both positions as <code>time</code>
increases from 5 to 7. This changes the color of the sky at position <code>0</code> from white
to gray and the color of the sky at position <code>1</code> from blue to dark gray.
</p>
<ul>
<li>
<code>r0</code>: 255 &rarr; 102
</li>
<li>
<code>g0</code>: 255 &rarr; 102
</li>
<li>
<code>b0</code>: 255 &rarr; 102
</li>
<li>
<code>r1</code>: 102 &rarr; 51
</li>
<li>
<code>g1</code>: 153 &rarr; 51
</li>
<li>
<code>b1</code>: 255 &rarr; 51
</li>
</ul>
<p>
Now, just as in Challenge 1, create a vertical linear gradient so position
<code>0</code> is at the horizon and position <code>1</code> is 300 pixels above the horizon.
</p>
<p>
Instead of hardcoding three color stops, add color stops at positions <code>0</code>
and <code>1</code> and use the RGB values stored in the six variables to set the colors
using the <code>rgbColor()</code> function.
</p>
<p>
Fill a rectangle with the gradient positioned at (0, 0) going down to the horizon and
across the width of the canvas.
</p>
<p>
Then, set the value of <code>horizonY</code> so the y-coordinate of the horizon is 100 pixels
above the bottom of the canvas. The program should now draw slices of the sky as it gets darker
at 5:00, 5:30, 6:00, 6:30, and 7:00 pm.
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="if_statements" href="../if_statements/index.html">If Statements</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="save" href="../save/index.html">save() / restore()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="translate" href="../translate/index.html">translate()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="create_linear_gradient" href="../create_linear_gradient/index.html">createLinearGradient()</a>
</p>

<div class='code-preview mb-2'>
<p>
<strong>Previous Challenge:</strong>
View your
<span class='code-preview-link' data-editorid='animated_cityscape_stage1_challenge2_editor'>
code from
Stage
1
Challenge
2
</span>
to use on this challenge.
</p>
<div class='code-preview-missing'>
<strong>Code Missing:</strong>
You have not yet entered any code in to the previous challenge:
Stage
1
Challenge
2
</div>
<div class='code-preview-view'>
<strong>
Stage
1
Challenge
2
</strong>
<div class='code-preview-code'></div>
</div>
</div>

</div>
</div>
<div class='row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_challenge3_editor'>var canvas = document.getElementById('animated_cityscape_stage1_challenge3');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var time;&#x000A;var horizonY; // Set the y-coordinate of the horizon so it is 100 pixels above the bottom of the canvas&#x000A;&#x000A;context.save();&#x000A;&#x000A;time = 5.0;&#x000A;drawSky(); // Draw the sky at 5:00 pm&#x000A;context.translate(72, 0);&#x000A;time = 5.5;&#x000A;drawSky(); // Draw the sky at 5:30 pm&#x000A;context.translate(72, 0);&#x000A;time = 6.0;&#x000A;drawSky(); // Draw the sky at 6:00 pm&#x000A;context.translate(72, 0);&#x000A;time = 6.5;&#x000A;drawSky(); // Draw the sky at 6:30 pm&#x000A;context.translate(72, 0);&#x000A;time = 7.0;&#x000A;drawSky(); // Draw the sky at 7:00 pm&#x000A;&#x000A;context.restore();&#x000A;&#x000A;function rgbColor(r, g, b) {&#x000A;  &#x000A;  // Copy the function definition from Challenge 2&#x000A;  &#x000A;}&#x000A;&#x000A;function drawSky() {&#x000A;  &#x000A;  // Declare r0, g0, b0, r1, g1, b1&#x000A;  // Use an if statement to calculate the values assigned to r0, g0, b0, r1, g1, b1&#x000A;  // Create a vertical linear gradient from the horizon to a point 300 pixels above the horizon&#x000A;  // Add color stops at positions 0 and 1&#x000A;  // Use the gradient to fill a rectangle positioned at (0, 0) that goes down to the horizon and across the width of the canvas&#x000A;  &#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_challenge3'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge4'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 4
</h2>
<figure class='float-xs-right px-2'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/animated_cityscape/stage1/challenge4Visual1-ae26863373ac005a6b350b6221fb2cb59e6872009936095a1b36f1f99c39345e.png" alt="Challenge4visual1" />
<figcaption class='text-xs-center small'>What your drawing should look like</figcaption>
</figure>
<p>
To turn the sky along the horizon red as the sun sets, we need to add a
third color stop between positions <code>0</code> and <code>1</code>. The
third color stop will confine the red color to a narrow band.
</p>
<p>
Start by setting <code>horizonY</code>, the y-coordinate of the horizon,
and copying the definitions for the <code>rgbColor()</code> and <code>drawSky()</code>
functions from Challenge 3.
</p>
<p>
Inside the <code>drawSky()</code> function, declare the variables <code>pMiddle</code>,
<code>rMiddle</code>, <code>gMiddle</code>, and <code>bMiddle</code> for the middle color
stop. We are using <code>pMiddle</code> to set the position of the color stop. By starting
at position <code>1</code> and moving down to position <code>0</code>, it will confine the
red color to a narrower and narrower band until it disappears completely.
</p>
<p>
If <code>time < 5</code> or <code>time > 7</code>, set <code>pMiddle</code> to -1.
</p>
<p>
Why are we setting <code>pMiddle</code> to -1? Before 5:00 pm and after 7:00 pm, we only
need to add color stops at positions <code>0</code> and <code>1</code>; we aren't adding
a third color stop at position <code>pMiddle</code>. By setting <code>pMiddle</code> to -1,
we are letting ourselves know not to add the third color stop later on.
</p>
<p>
In the code block for the else clause, change the calculations for the color at
position <code>0</code> and add the calculations for the color at position <code>pMiddle</code>.
The calculations for the color at position <code>1</code> stay the same.
</p>
<ul>
<li>
<code>r0</code>: 255
</li>
<li>
<code>g0</code>: 255 &rarr; 0
</li>
<li>
<code>b0</code>: 255 &rarr; 0
</li>
<li>
<code>pMiddle</code>: 1 &rarr; 0
</li>
<li>
<code>rMiddle</code>: 102
</li>
<li>
<code>gMiddle</code>: 153 &rarr; 102
</li>
<li>
<code>bMiddle</code>: 255 &rarr; 102
</li>
</ul>
<p>
This changes the color of the sky at position <code>0</code> from white to red
and the color of the sky at position <code>1</code> from blue to dark gray. We
use the middle color stop at position <code>pMiddle</code> to make the red band
at the horizon narrower. The color of the sky at the middle color stop changes
from blue to gray, but it also moves closer to the horizon as <code>pMiddle</code>
changes from 1 to 0.
</p>
<p>
After creating the linear gradient and adding color stops at positions <code>0</code>
and <code>1</code>, add the middle color stop only if <code>pMiddle >= 0</code>. If
<code>pMiddle</code> is -1, the program will skip this step and the middle color stop
won't be added.
</p>
<pre><code>if (pMiddle >= 0) {&#x000A;  gradient.addColorStop(pMiddle, rgbColor(rMiddle, gMiddle, bMiddle));&#x000A;}</code></pre>
<p>
The program should now draw slices of the sky as it gets darker and redder along
the horizon at 5:00, 5:30, 6:00, 6:30, and 7:00 pm. If you need help with if statements
and linear gradients, visit the
<a class="reference-link" data-slug="if_statements" href="../if_statements/index.html">If Statements</a>
and
<a class="reference-link" data-slug="create_linear_gradient" href="../create_linear_gradient/index.html">createLinearGradient()</a>
lessons.
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="if_statements" href="../if_statements/index.html">If Statements</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="save" href="../save/index.html">save() / restore()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="translate" href="../translate/index.html">translate()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="create_linear_gradient" href="../create_linear_gradient/index.html">createLinearGradient()</a>
</p>

<div class='code-preview mb-2'>
<p>
<strong>Previous Challenge:</strong>
View your
<span class='code-preview-link' data-editorid='animated_cityscape_stage1_challenge3_editor'>
code from
Stage
1
Challenge
3
</span>
to use on this challenge.
</p>
<div class='code-preview-missing'>
<strong>Code Missing:</strong>
You have not yet entered any code in to the previous challenge:
Stage
1
Challenge
3
</div>
<div class='code-preview-view'>
<strong>
Stage
1
Challenge
3
</strong>
<div class='code-preview-code'></div>
</div>
</div>

</div>
</div>
<div class='row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_challenge4_editor'>var canvas = document.getElementById('animated_cityscape_stage1_challenge4');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var time;&#x000A;var horizonY; // Set the y-coordinate of the horizon so it is 100 pixels above the bottom of the canvas&#x000A;&#x000A;context.save();&#x000A;&#x000A;time = 5.0;&#x000A;drawSky(); // Draw the sky at 5:00 pm&#x000A;context.translate(72, 0);&#x000A;time = 5.5;&#x000A;drawSky(); // Draw the sky at 5:30 pm&#x000A;context.translate(72, 0);&#x000A;time = 6.0;&#x000A;drawSky(); // Draw the sky at 6:00 pm&#x000A;context.translate(72, 0);&#x000A;time = 6.5;&#x000A;drawSky(); // Draw the sky at 6:30 pm&#x000A;context.translate(72, 0);&#x000A;time = 7.0;&#x000A;drawSky(); // Draw the sky at 7:00 pm&#x000A;&#x000A;context.restore();&#x000A;&#x000A;function rgbColor(r, g, b) {&#x000A;  &#x000A;  // Copy the function definition from Challenge 3&#x000A;  &#x000A;}&#x000A;&#x000A;function drawSky() {&#x000A;  &#x000A;  // Copy the function definition from Challenge 3&#x000A;  &#x000A;  // Declare variables pMiddle, rMiddle, gMiddle, bMiddle for the middle color stop&#x000A;  // Set pMiddle to -1 if time < 5 or time > 7&#x000A;  // Update p0, g0, b0 to go from (255, 255, 255) to (255, 0, 0)&#x000A;  // Calculate pMiddle to go from 1 to 0&#x000A;  // Calculate rMiddle, gMiddle, bMiddle to go from (102, 153, 255) to (102, 102, 102)&#x000A;  // Add the middle color stop if pMiddle >= 0&#x000A;  &#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_challenge4'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
<div class='example row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Update the Time and Redraw the Scene with a Mouse Click
</h2>
<p>
At this point, we can draw the sky and ground at any time of day by manually
setting the <code>time</code> variable. The next step is writing a program
which updates the <code>time</code> variable and redraws the scene automatically.
</p>
<p>
A JavaScript program is triggered by events. So far, we've done all of our
drawing immediately when the page first loads. But we can also tell our program
to listen for events and run specific functions when those events occur.
</p>
<p>
In this example, we run the following code when the page loads:
</p>
<pre><code>var canvas = document.getElementById('animated_cityscape_stage1_example4');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var squareX, squareY;&#x000A;&#x000A;initScene();&#x000A;canvas.addEventListener('click', updateScene);</code></pre>
<p>
We start by storing a reference to the canvas and the canvas's context in the
variables <code>canvas</code> and <code>context</code>. Then, we declare the global
variables <code>squareX</code> and <code>squareY</code>. We need to declare these
variables globally so all of our functions can use them and the values stored in them
are persistent and aren't deleted once a function ends. To learn more about variables
and scope, visit the
<a class="reference-link" data-slug="variables" href="../variables/index.html">Variables</a>
lesson. Finally, we call the <code>initScene()</code> function and use the
<code>addEventListener()</code> method to register an event listener on the canvas
object. Note: "init" is short for initialize.
</p>
<p>
The <code>initScene()</code> function sets the initial values of <code>squareX</code>
and <code>squareY</code> and calls the <code>drawScene()</code> function:
</p>
<pre><code>function initScene() {&#x000A;  squareX = 10;&#x000A;  squareY = 10;&#x000A;  &#x000A;  drawScene();&#x000A;}</code></pre>
<p>
The <code>drawScene()</code> function draws a square filled with the color
<code>'RoyalBlue'</code> at the coordinates (<code>squareX</code>, <code>squareY</code>):
</p>
<pre><code>function drawScene() {&#x000A;  context.save();&#x000A;  context.fillStyle = 'RoyalBlue';&#x000A;  context.fillRect(squareX, squareY, 20, 20);&#x000A;  context.restore();&#x000A;}</code></pre>
<p>
By registering to listen for <code>'click'</code> events, the program will
automatically call the <code>updateScene()</code> function whenever a mouse
click is detected on the canvas. Note: Because we are passing the
<code>updateScene()</code> function into the <code>addEventListener()</code>
method as a variable, we don't include parentheses after the function name. To learn
more about passing functions as variables and registering event listeners, visit the
<a class="reference-link" data-slug="functions" href="../functions/index.html">Functions</a>
and
<a class="reference-link" data-slug="event_listeners" href="../event_listeners/index.html">Event Listeners</a>
lessons.
</p>
<p>
The <code>updateScene()</code> method adds 30 to <code>squareX</code> and 20
to <code>squareY</code> before calling the <code>drawScene()</code> function
and drawing another square:
</p>
<pre><code>function updateScene() {&#x000A;  squareX += 30; // This is a shorter way of writing squareX = squareX + 30&#x000A;  squareY += 20; // This is a shorter way of writing squareY = squareY + 20&#x000A;  &#x000A;  drawScene();&#x000A;}</code></pre>
<p>
Now we can automatically update the drawing on the canvas simply by clicking
on it. Note that the new scene is drawn on top of the existing scene. If we
wanted to redraw the square and make it look like the square is moving, we'd
have to clear the canvas first.
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="event_listeners" href="../event_listeners/index.html">Event Listeners</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
</p>

</div>
<div class='col-xs-12'>
<div class='interactive row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_example4_editor'>var canvas = document.getElementById('animated_cityscape_stage1_example4');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var squareX, squareY;&#x000A;&#x000A;initScene();&#x000A;canvas.addEventListener('click', updateScene);&#x000A;&#x000A;function initScene() {&#x000A;  squareX = 10;&#x000A;  squareY = 10;&#x000A;  &#x000A;  drawScene();&#x000A;}&#x000A;&#x000A;function drawScene() {&#x000A;  context.save();&#x000A;  context.fillStyle = 'RoyalBlue';&#x000A;  context.fillRect(squareX, squareY, 20, 20);&#x000A;  context.restore();&#x000A;}&#x000A;&#x000A;function updateScene() {&#x000A;  squareX += 30; // This is a shorter way of writing squareX = squareX + 30&#x000A;  squareY += 20; // This is a shorter way of writing squareY = squareY + 20&#x000A;  &#x000A;  drawScene();&#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_example4'></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge5'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 5
</h2>
<figure class='float-xs-right px-2'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/animated_cityscape/stage1/challenge5Visual1-6530363b090cb5a29cfef2672a1ad42825275bc639126616771fae082147f726.png" alt="Challenge5visual1" />
<figcaption class='text-xs-center small'>What your drawing should look like at 6:12 pm</figcaption>
</figure>
<p>
Write a program that increases the <code>time</code> and redraws the scene
when a mouse click is detected on the canvas.
</p>
<p>
Start by copying the definitions for the <code>drawSky()</code>,
<code>drawGround()</code>, and <code>rgbColor()</code> functions from Challenges 2 and 4.
</p>
<p>
Inside the <code>initScene()</code> function, set <code>time</code> to 5,
set <code>horizonY</code> so the horizon is 100 pixels above the bottom of
the canvas, and then call the <code>drawScene()</code> function.
</p>
<p>
Inside the <code>drawScene()</code> function, draw the sky and ground. Then,
call the <code>drawTime()</code> function to automatically draw the time in the
bottom left corner of the canvas.
</p>
<p>
Inside the <code>updateScene()</code> function, increase the <code>time</code>
by 0.2 if <code>time < 7</code>, else reset the <code>time</code> back to 5.
Then, call the <code>drawScene()</code> function to draw a new scene on top of
the current one.
</p>
<p>
Press "Run" and click on the canvas enough times to see the sky and ground change
color between 5:00 and 7:00 pm. Once you feel satisfied that the scene is updating
and drawing correctly, mark the challenge as complete by selecting "Yes, it looks good".
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="event_listeners" href="../event_listeners/index.html">Event Listeners</a>
</p>

<div class='code-preview mb-2'>
<p>
<strong>Previous Challenge:</strong>
View your
<span class='code-preview-link' data-editorid='animated_cityscape_stage1_challenge4_editor'>
code from
Stage
1
Challenge
4
</span>
to use on this challenge.
</p>
<div class='code-preview-missing'>
<strong>Code Missing:</strong>
You have not yet entered any code in to the previous challenge:
Stage
1
Challenge
4
</div>
<div class='code-preview-view'>
<strong>
Stage
1
Challenge
4
</strong>
<div class='code-preview-code'></div>
</div>
</div>

</div>
</div>
<div class='row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_challenge5_editor'>var canvas = document.getElementById('animated_cityscape_stage1_challenge5');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var time;&#x000A;var horizonY;&#x000A;&#x000A;initScene();&#x000A;canvas.addEventListener('click', updateScene);&#x000A;&#x000A;function initScene() {&#x000A;  &#x000A;  // Set the time to 5&#x000A;  // Set horizonY so the horizon is 100 pixels above the bottom of the canvas&#x000A;  // Draw the scene&#x000A;  &#x000A;}&#x000A;&#x000A;function drawScene() {&#x000A;  &#x000A;  // Draw the sky&#x000A;  // Draw the ground&#x000A;  &#x000A;  drawTime(); // Draw the time in the bottom left corner&#x000A;  &#x000A;}&#x000A;&#x000A;function updateScene() {&#x000A;  &#x000A;  // If time < 7, increase the time by 0.2, else reset the time back to 5&#x000A;  // Draw the scene&#x000A;  &#x000A;}&#x000A;&#x000A;function drawSky() {&#x000A;  &#x000A;  // Copy the function definition from Challenge 4&#x000A;  &#x000A;}&#x000A;&#x000A;function drawGround() {&#x000A;  &#x000A;  // Copy the function definition from Challenge 2&#x000A;  &#x000A;}&#x000A;&#x000A;function rgbColor(r, g, b) {&#x000A;  &#x000A;  // Copy the function definition from Challenge 4&#x000A;  &#x000A;}&#x000A;&#x000A;function drawTime() {&#x000A;  var t;&#x000A;  var h = Math.floor(time);&#x000A;  var m = Math.round(60 * (time - h));&#x000A;  &#x000A;  if (m >= 10) {&#x000A;    t = h + ':' + m;&#x000A;  } else {&#x000A;    t = h + ':0' + m;&#x000A;  }&#x000A;  &#x000A;  context.save();&#x000A;  context.fillStyle = 'White';&#x000A;  context.font = '16px Arial';&#x000A;  context.fillText(t, 10, canvas.height - 10);&#x000A;  context.restore();&#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_challenge5'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
<div class='example row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Update the Time and Redraw the Scene with a Timer
</h2>
<p>
Instead of using a mouse click to update the time and redraw the scene,
we are going to use a timer.
</p>
<p>
In this example, we set up a timer to update the scene from the previous
example. We start by declaring the global variable <code>interval</code>. Then,
instead of adding an event listener to the canvas object to detect mouse
clicks, we use the <code>setInterval()</code> method to create a timer that will
automatically call the <code>updateScene()</code> function every 25 milliseconds
and we store a reference to the timer in the variable <code>interval</code>.
</p>
<pre><code>var interval;&#x000A;&#x000A;interval = setInterval(updateScene, 25); // Call the updateScene() function every 25 milliseconds</code></pre>
<p>
Again, because we are passing the <code>updateScene()</code> function into
the <code>setInterval()</code> method as a variable, we don't include
parentheses at the end of the function name. The number <code>25</code> tells
the timer how long to wait before calling the <code>updateScene()</code>
function again. The <code>setInterval()</code> method measures time in
milliseconds and there are 1000 milliseconds in one second. So, if the timer
calls the <code>updateScene()</code> function every 25 milliseconds, it will
update the scene 40 times per second (1000 &divide; 25 = 40).
</p>
<p>
Inside the <code>updateScene()</code> function, we increase <code>squareX</code>
and <code>squareY</code> by 3 and 2, instead of 30 and 20, so the square doesn't
move as far in each update. Then, if <code>squareX > canvas.width</code>, which
means the latest square is positioned past the right edge of the canvas, we cancel
the timer and stop updating the scene by passing the reference stored in the
<code>interval</code> variable into the <code>clearInterval()</code> method.
</p>
<pre><code>function updateScene() {&#x000A;  squareX += 3; // This is a shorter way of writing squareX = squareX + 3&#x000A;  squareY += 2; // This is a shorter way of writing squareY = squareY + 2&#x000A;  &#x000A;  drawScene();&#x000A;  &#x000A;  if (squareX > canvas.width) {&#x000A;    clearInterval(interval); // Cancel the timer and stop updating the scene&#x000A;  }&#x000A;}</code></pre>
<p>
Finally, inside the <code>drawScene()</code> function, before drawing the
square, we draw a rectangle filled with the color <code>'Cornsilk'</code>
covering the entire canvas. This will cover the previous scene, so now it
looks like one square is moving instead of a new square being drawn each time.
</p>
<pre><code>function drawScene() {&#x000A;  context.save();&#x000A;  context.fillStyle = 'Cornsilk';&#x000A;  context.fillRect(0, 0, canvas.width, canvas.height); // Draw a rectangle over the entire canvas&#x000A;  context.fillStyle = 'RoyalBlue';&#x000A;  context.fillRect(squareX, squareY, 20, 20);&#x000A;  context.restore();&#x000A;}</code></pre>
<p>
Press "Run" to reload the page and start the animation.
</p>
<p>
See what happens if you don't draw a rectangle over the previous scene or if
you change how far the square moves or the time interval between updates. Note:
if you try to update the scene too quickly, the program won't be able to keep
up and the animation may stutter. To learn more setting timers, visit the
<a class="reference-link" data-slug="set_interval" href="../set_interval/index.html">setInterval()</a>
lesson.
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="set_interval" href="../set_interval/index.html">setInterval()</a>
</p>

</div>
<div class='col-xs-12'>
<div class='interactive row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_example5_editor'>var canvas = document.getElementById('animated_cityscape_stage1_example5');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var interval;&#x000A;var squareX, squareY;&#x000A;&#x000A;initScene();&#x000A;interval = setInterval(updateScene, 25);&#x000A;&#x000A;function initScene() {&#x000A;  squareX = 10;&#x000A;  squareY = 10;&#x000A;  &#x000A;  drawScene();&#x000A;}&#x000A;&#x000A;function drawScene() {&#x000A;  context.save();&#x000A;  context.fillStyle = 'Cornsilk';&#x000A;  context.fillRect(0, 0, canvas.width, canvas.height); // Draw a rectangle over the entire canvas&#x000A;  context.fillStyle = 'RoyalBlue';&#x000A;  context.fillRect(squareX, squareY, 20, 20);&#x000A;  context.restore();&#x000A;}&#x000A;&#x000A;function updateScene() {&#x000A;  squareX += 3; // This is a shorter way of writing squareX = squareX + 3&#x000A;  squareY += 2; // This is a shorter way of writing squareY = squareY + 2&#x000A;  &#x000A;  drawScene();&#x000A;  &#x000A;  if (squareX > canvas.width) {&#x000A;    clearInterval(interval); // Cancel the timer and stop updating the scene&#x000A;  }&#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_example5'></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge6'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 6
</h2>
<p>
Copy the program from Challenge 5.
</p>
<p>
Then, change the program so that, instead of listening for mouse clicks to
update the scene, a timer automatically calls the <code>updateScene()</code>
function every 50 milliseconds.
</p>
<p>
Inside the <code>updateScene()</code> function, increase the time by 0.05
and, instead of resetting the time back to 5, cancel the timer and stop updating
the scene if <code>time > 7</code>.
</p>
<p>
Press "Run" and watch the sky and ground change color between 5:00 and 7:00 pm.
If you need to slow the animation down to get a better look, increase the time
interval passed into the <code>setInterval()</code> method. Once you feel satisfied
that the scene is updating and drawing correctly, mark the challenge as complete by
selecting "Yes, it looks good".
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="set_interval" href="../set_interval/index.html">setInterval()</a>
</p>

<div class='code-preview mb-2'>
<p>
<strong>Previous Challenge:</strong>
View your
<span class='code-preview-link' data-editorid='animated_cityscape_stage1_challenge5_editor'>
code from
Stage
1
Challenge
5
</span>
to use on this challenge.
</p>
<div class='code-preview-missing'>
<strong>Code Missing:</strong>
You have not yet entered any code in to the previous challenge:
Stage
1
Challenge
5
</div>
<div class='code-preview-view'>
<strong>
Stage
1
Challenge
5
</strong>
<div class='code-preview-code'></div>
</div>
</div>

</div>
</div>
<div class='row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_challenge6_editor'>var canvas = document.getElementById('animated_cityscape_stage1_challenge6');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var time;&#x000A;var horizonY;&#x000A;&#x000A;initScene();&#x000A;canvas.addEventListener('click', updateScene);&#x000A;&#x000A;function initScene() {&#x000A;  &#x000A;  // Copy the function definition from Challenge 5&#x000A;  &#x000A;}&#x000A;&#x000A;function drawScene() {&#x000A;  &#x000A;  // Copy the function definition from Challenge 5&#x000A;  &#x000A;}&#x000A;&#x000A;function updateScene() {&#x000A;  &#x000A;  // Copy the function definition from Challenge 5&#x000A;  &#x000A;  // Increase the time by 0.05&#x000A;  // If time >= 7, cancel the timer and stop updating the scene&#x000A;  &#x000A;}&#x000A;&#x000A;function drawSky() {&#x000A;  &#x000A;  // Copy the function definition from Challenge 5&#x000A;  &#x000A;}&#x000A;&#x000A;function drawGround() {&#x000A;  &#x000A;  // Copy the function definition from Challenge 5&#x000A;  &#x000A;}&#x000A;&#x000A;function rgbColor(r, g, b) {&#x000A;  &#x000A;  // Copy the function definition from Challenge 5&#x000A;  &#x000A;}&#x000A;&#x000A;function drawTime() {&#x000A;  var t;&#x000A;  var h = Math.floor(time);&#x000A;  var m = Math.round(60 * (time - h));&#x000A;  &#x000A;  if (m >= 10) {&#x000A;    t = h + ':' + m;&#x000A;  } else {&#x000A;    t = h + ':0' + m;&#x000A;  }&#x000A;  &#x000A;  context.save();&#x000A;  context.fillStyle = 'White';&#x000A;  context.font = '16px Arial';&#x000A;  context.fillText(t, 10, canvas.height - 10);&#x000A;  context.restore();&#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_challenge6'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
<div class='example row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Play and Pause the Scene
</h2>
<p>
In this example, we add event listeners to the previous example's program
to play and pause the scene.
</p>
<p>
We can register our program to listen for more than mouse click events. On
a web page, only one HTML element can have the focus at a time. The focus
determines which element is actively receiving keyboard events. On this page
alone there are thirteen editors. It would get kind of crazy if you were typing
into more than one editor at a time.
</p>
<p>
Note: A canvas element does not normally receive the focus. We have enabled
each canvas to receive the focus by setting its <code>tabindex</code> attribute.
That's not something you need to know about until you start creating the HTML
for your own web pages.
</p>
<p>
Because we have enabled each canvas to receive the focus, clicking on a
canvas selects it and triggers a <code>'focus'</code> event. Clicking on a
different part of the page deselects it and triggers a <code>'blur'</code>
event. We start by adding event listeners to play the scene when the canvas
receives a <code>'focus'</code> event and pause the scene when the canvas
receives a <code>'blur'</code> event.
</p>
<pre><code>canvas.addEventListener('focus', playScene);&#x000A;canvas.addEventListener('blur', pauseScene);</code></pre>
<p>
Instead of starting the timer when the page first loads, we start the timer
inside the <code>playScene()</code> function. We also check the position of
the last square before starting the timer. If the last square is off the canvas,
we reset it's position.
</p>
<pre><code>function playScene() {&#x000A;  if (squareX > canvas.width) {&#x000A;    squareX = 10;&#x000A;    squareY = 10; // Reset the square's position&#x000A;  }&#x000A;  &#x000A;  interval = setInterval(updateScene, 25);&#x000A;}</code></pre>
<p>
Inside the <code>pauseScene()</code> function, we cancel the timer and
draw the text string <code>'Click to Play'</code> in the center of the
canvas so the user knows how to start the animation.
</p>
<pre><code>function pauseScene() {&#x000A;  clearInterval(interval);&#x000A;  &#x000A;  context.save();&#x000A;  context.fillStyle = 'Black';&#x000A;  context.font = '16px Arial';&#x000A;  context.textAlign = 'center';&#x000A;  context.fillText('Click to Play', canvas.width / 2, canvas.height / 2);&#x000A;  context.restore();&#x000A;}</code></pre>
<p>
We also call the <code>pauseScene()</code> function when the page first loads
so the <code>'Click to Play'</code> text string is drawn right away.
</p>
<p>
Then, inside the <code>updateScene()</code> function, instead of canceling
the timer if <code>squareX > canvas.width</code>, we use the <code>blur()</code>
method to blur the canvas. When the canvas loses the focus, it receives a
<code>blur</code> event and the <code>pauseScene()</code> function is called.
</p>
<pre><code>function updateScene() {&#x000A;  squareX += 3; // This is a shorter way of writing squareX = squareX + 3&#x000A;  squareY += 2; // This is a shorter way of writing squareY = squareY + 2&#x000A;  &#x000A;  drawScene();&#x000A;  &#x000A;  if (squareX > canvas.width) {&#x000A;    canvas.blur(); // Remove the focus from the canvas&#x000A;  }&#x000A;}</code></pre>
<p>
Click on the canvas to start the animation. The animation will continue
running until you click on a different part of the page or until the latest
square is positioned past the right edge of the canvas. If you restart the
animation and the latest square was positioned past the right edge of the
canvas, <code>squareX</code> and <code>squareY</code> are reset and the animation
starts again from the beginning.
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="event_listeners" href="../event_listeners/index.html">Event Listeners</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="set_interval" href="../set_interval/index.html">setInterval()</a>
</p>

</div>
<div class='col-xs-12'>
<div class='interactive row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_example6_editor'>var canvas = document.getElementById('animated_cityscape_stage1_example6');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var interval;&#x000A;var squareX, squareY;&#x000A;&#x000A;initScene();&#x000A;pauseScene();&#x000A;canvas.addEventListener('focus', playScene);&#x000A;canvas.addEventListener('blur', pauseScene);&#x000A;&#x000A;function initScene() {&#x000A;  squareX = 10;&#x000A;  squareY = 10;&#x000A;  &#x000A;  drawScene();&#x000A;}&#x000A;&#x000A;function drawScene() {&#x000A;  context.save();&#x000A;  context.fillStyle = 'Cornsilk';&#x000A;  context.fillRect(0, 0, canvas.width, canvas.height); // Draw a rectangle over the entire canvas&#x000A;  context.fillStyle = 'RoyalBlue';&#x000A;  context.fillRect(squareX, squareY, 20, 20);&#x000A;  context.restore();&#x000A;}&#x000A;&#x000A;function updateScene() {&#x000A;  squareX += 3; // This is a shorter way of writing squareX = squareX + 3&#x000A;  squareY += 2; // This is a shorter way of writing squareY = squareY + 2&#x000A;  &#x000A;  drawScene();&#x000A;  &#x000A;  if (squareX > canvas.width) {&#x000A;    canvas.blur(); // Remove the focus from the canvas&#x000A;  }&#x000A;}&#x000A;&#x000A;function playScene() {&#x000A;  if (squareX > canvas.width) {&#x000A;    squareX = 10;&#x000A;    squareY = 10; // Reset the square's position&#x000A;  }&#x000A;  &#x000A;  interval = setInterval(updateScene, 25);&#x000A;}&#x000A;&#x000A;function pauseScene() {&#x000A;  clearInterval(interval);&#x000A;  &#x000A;  context.save();&#x000A;  context.fillStyle = 'Black';&#x000A;  context.font = '16px Arial';&#x000A;  context.textAlign = 'center';&#x000A;  context.fillText('Click to Play', canvas.width / 2, canvas.height / 2);&#x000A;  context.restore();&#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_example6'></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge7'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 7
</h2>
<p>
Copy the program from Challenge 6.
</p>
<p>
Then, change the program so the scene is initially paused and the time set
to 2. Play the scene when the canvas receives the focus and continue playing
the scene until the canvas loses the focus or until <code>time > 12</code>. If
the canvas receives the focus and the time is already greater than 12, reset
the time back to 2 and replay the scene from the beginning.
</p>
<p>
Press "Run" and click on the canvas to start playing the scene. Once you feel
satisfied that the scene is playing and pausing correctly, mark the challenge
as complete by selecting "Yes, it looks good".
</p>
<p>
<strong>Quick Reference:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="variables" href="../variables/index.html">Variables</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="functions" href="../functions/index.html">Functions</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="event_listeners" href="../event_listeners/index.html">Event Listeners</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="set_interval" href="../set_interval/index.html">setInterval()</a>
</p>

<div class='code-preview mb-2'>
<p>
<strong>Previous Challenge:</strong>
View your
<span class='code-preview-link' data-editorid='animated_cityscape_stage1_challenge6_editor'>
code from
Stage
1
Challenge
6
</span>
to use on this challenge.
</p>
<div class='code-preview-missing'>
<strong>Code Missing:</strong>
You have not yet entered any code in to the previous challenge:
Stage
1
Challenge
6
</div>
<div class='code-preview-view'>
<strong>
Stage
1
Challenge
6
</strong>
<div class='code-preview-code'></div>
</div>
</div>

</div>
</div>
<div class='row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='animated_cityscape_stage1_challenge7_editor'>var canvas = document.getElementById('animated_cityscape_stage1_challenge7');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;// Copy the program from Challenge 6 here&#x000A;&#x000A;function playScene() {&#x000A;  &#x000A;}&#x000A;&#x000A;function pauseScene() {&#x000A;  &#x000A;  // Cancel the timer&#x000A;  &#x000A;  context.save();&#x000A;  context.fillStyle = 'rgba(0, 0, 0, 0.2)';&#x000A;  context.fillRect(canvas.width / 2 - 55, canvas.height / 2 - 18, 110, 24);&#x000A;  context.fillStyle = 'White';&#x000A;  context.font = '16px Arial';&#x000A;  context.textAlign = 'center';&#x000A;  context.fillText('Click to Play', canvas.width / 2, canvas.height / 2);&#x000A;  context.restore();&#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
This is a lesson, not a challenge, the code runs automatically.
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run run-only btn btn-success'>
Run
</div>
<div class='run run-and-focus btn btn-success'>
Run and Focus Canvas
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='animated_cityscape_stage1_challenge7'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
</div>

<div aria-hidden='true' aria-labelledby='referenceModalLabel' class='modal fade' id='reference-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<button aria-label='Close' class='close' data-dismiss='modal' type='button'>
<span aria-hidden='true'>×</span>
</button>
<h4 class='modal-title' id='referenceModalLabel'></h4>
</div>
<div class='modal-body'></div>
<div class='modal-footer'>
<div class='float-xs-right'>
<button class='btn btn-secondary' data-dismiss='modal' type='button'>Close</button>
</div>
<div class='text-xs-left'>
<button class='btn btn-primary text-white lesson-link'>View Full Lesson</button>
</div>
</div>
</div>
</div>
</div>
<div class='py-3'>
<h2>
Ready for the next lesson?
</h2>
<p class='py-1'>
Next up, the
<a href="../stage2/index.html">&quot;Stage: 2&quot; lesson &gt;</a>
</p>
</div>
</div>
</div>
</div>
</body>
</html>

<!-- Localized -->