<!DOCTYPE html>
<html>
<head>
<meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
<title>Drawing Code</title>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="dvfSQOiKlKSsgr1w2272PFgAUy1VOLFULYVSQ4BZMlmwri0Bs96YSRkwSwPNzbH5HslDiKwxlXyIxUEiTRLyBA==" />
<link rel="stylesheet" media="all" href="../../../assets/application.self-6693732d946f61761af2eeafcf9c870441f1af9f77c9d2a5db4509578dd265e0-body=1.css" data-turbolinks-track="reload" />
<script src="../../../assets/jquery.self-660adc51e0224b731d29f575a6f1ec167ba08ad06ed5deca4f1e8654c135bf4c.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/jquery_ujs.self-e87806d0cf4489aeb1bb7288016024e8de67fd18db693fe026fe3907581e53cd.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/bootstrap.self-4e71bfbf6aff83432bb0f204b1cfa3beaf9d05f0d2acf9ec752924a628245be1.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/turbolinks.self-c5acd7a204f5f25ce7a1d8a0e4d92e28d34c9e2df2c7371cd7af88e147e4ad82.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/ace/ace.self-0acb0427eef086a17859bfe56ecfaf24bc47c928ad7db87d5ec5bf235e40cb40.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/ace/mode-javascript.self-f62f7e63cad01dbe717d22344bf979ec13fa33f523d1b94b1576022bd4aa4d7a.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/action_cable.self-1641ec3e8ea24ed63601e86efcca7f9266e09f390e82199d56aa7e4bd50e1aa9.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/cable.self-6e0514260c1aa76eaf252412ce74e63f68819fd19bf740595f592c5ba4c36537.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/code_preview.self-b37269bda74e81e3e6e832ad40469072b79b5b1d3a48a2e91986fd44549f82c0.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/drawings.self-1119b89f5468a45fd5e064d9ba68962f14b5248b9ff1a6b33b2307875e470686.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/examples.self-62f6af2ec5a00cd81eb1292963de6ac7a2146c48d0d3cba6abe1adc998cae145.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/init.self-fef4ca73cdd5fc98231ba13aa0c4b3f7a626e61c3afedb604da73204cdfb80bc.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/jasmine_examples/Player.self-df86cadc05ae752e78b03dabdf6332dfdb2fb5016d4cf4572c81e57779cc62c4.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/jasmine_examples/Song.self-676a725aa543d21fbf2f98b899a89804ae472e93d25bc4f115b4914af237a610.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lesson.self-4c007310fc5244946716688a8afc18ef0b6e54f4cfc18f8aff6b18ab0e203889.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/animated_cityscape/stage1.self-db36a18e3a7661a8d275acc67cf5811cb4f28fdc593b38a07692bcc94578fa9c.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/basic_cityscape/stage1.self-af3dd34f4f344c2e4c6fd02ae6fcf3a3ab4cd43a8d72b9e10ac7e857ec7e3321.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/basic_cityscape/stage2.self-225920e2665631ee62b7fbe95291c6ac9e1c62142a2bc469a623623a6c18a705.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/basic_cityscape/stage3.self-d849334bedcf13dec8fb3da9f57078b783809e1a25dfc733da271108516fb213.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/basic_cityscape/stage4.self-566ff4fe09aeeee06c9bfca2d5a81fc52bad7f964d150d6025e854e6a9a8c2de.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/clearRect.self-9e82ca8aa93793f04e73caa7f25eaf5e8c815cbe718ac5f4747de25ef19efce9.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/coordinates.self-4821f9b9bad6785349895eef0fd2998882879f8d57aff2f232eb8b4d961203f1.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/create_linear_gradient.self-ab2b095d11ee8db1ddc55bb8a6d8ddb228a26f658da8dd84b46aefc823d3dd84.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/fill_rect.self-4bb525e22a290e2ae4aa8446082bdcd7168ea5c515f27a3b3b8b6d439760ea8a.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/fill_style.self-6d153ccc75d0aa54db66acd06e950248f8cabe7184d1789400272825d0648764.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_birds/stage1.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2612f44dde450b5c157aa5f95c05.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_square/stage1.self-5e1826d318dd1ee89e345706be1d913c771654b48f9f6eb6ea15a2eaa7890042.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_square/stage2.self-8bcd55189db178b1c0849424b250e321a17b91ce50465449b4ca8f676123654d.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_square/stage3.self-cb39fe3b38a5ae28456afbcbe4c17c1b40b1fdeb13b925d136a43609a02907d3.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/flappy_square/stage4.self-17d7302a880ad6257214c9cb8ead56582ece4727ecde96454c320b23f138d16e.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/for_loops.self-6ea947c621baba5fe10d587860ab777038544953934ba8d15ccea3fff8128ea2.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/functions.self-d002fbef8abc3e970526900bc8987e0e6b43e4caedda60e4ea2318eae2cc0330.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/granular_basic_cityscape/stage1.self-9a6bb1b4e3de5f46da1e072c0fa52d0391b4f64454b97d5b34b6ec01e46dfb32.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/granular_basic_cityscape/stage2.self-274b9a3782e74ccca603cacdcfdc7de6a30a0a3ab57f9a6f1d25b7781e711f99.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/granular_basic_cityscape/stage3.self-e2064f6932bc938d199b51dc1ba885fc1f3b2913935b7bdb8203011970326dbf.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/granular_basic_cityscape/stage4.self-611052ea22dac28d9a24fc6ecb7c680cd07e073d394dc8a34237a2b674d846ad.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/if_statements.self-101ecc2cff3aa907c15c9f716abadc39aecfb0d8ede7e9f6ce462da649f1294b.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/line_to.self-65410ae951aab7cdda49956ec4aa794d97db0360507ea427d9e41ef840d88d93.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/random.self-e3526158091bc0c29fb3eaecbfa5bd813ee77bf67b2449758af5a4608bd8397b.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/round.self-8f4f7fa74c9157dc1707d118675f7e35d4621225571a950953278131b01a5022.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/save.self-ba90c232d56f796645e264833860b2cbcb639bb0e37772b06ea84198141d8bec.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/scale.self-8bedfd1625ced565d0fd9cdc69c9693cd07a039860dbee59df8fc4eb524b0d70.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/switch_statements.self-9fdab32aed464bc617220d4c4fbce43b07887fe98eca5de2828efb6e05c74d5c.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/translate.self-16962e3a7636c88e58d6a2bf9f63a8e5c65302badec269e70a30a97bfbc4c8ad.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/variables.self-4562a8743966906ee7fb58792fd51e5aac5203a5f64b393175caa98ba33ddedc.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lessons/while_loops.self-d6177003c6f9f97f79cb8c63956ace41e225e85175095da98c102ebd5432f7e3.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/app/canvas.self-429f6c3eb7215ea53ffe08598331778858aa202b6c9cdf18775ee1623316198a.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/app/editor.self-b89ef60f8e94a6570ad58b0eddfdd1aaa2b2cd9832da86b691d6282087a63af0.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/app/files.self-16fff0bc3c9a315d22413e3b6a090fb8ef8f5f1257b42dade438f57a0de1f134.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/app/progress.self-85855a4b2ffe2ff58692f669b689c7ad8db3cee30eb947e32791e81148164b36.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/test/code.self-186d38d443a8bc51bbeec7159887e3781eaad676a86b9d159eca7ec40e21f7ba.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/test/image_comparison.self-83be79c1bfdac13ff2c69e6916a326f2698035d7381c28f12e44637de7618bac.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/lib/test/point.self-e1435fcb5c66e2107d91d34c16e06e6c0dd8d06286396d3d5b3b05c22989d9b2.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/navigation.self-3abb68970f3392649f6ee452427597fc92e324a7be21f97b6501e5a2ec47609e.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/referenceModal.self-4ba25626378a146e8d2a7ae7edd72600ddef60371b98f42b0c3555b56cd02ff9.js?body=1" data-turbolinks-track="reload"></script>
<script src="../../../assets/application.self-4d37d7bcf4b0b32507438063ae47ba88dd0178863f7c7a2c7125b221eefea772.js?body=1" data-turbolinks-track="reload"></script>
</head>
<body>
<nav class='navbar navbar-dark navbar-fixed-top bg-inverse'>
<button aria-controls='navbar' aria-expanded='false' aria-label='Toggle navigation' class='navbar-toggler hidden-sm-up' data-target='#navbar' data-toggle='collapse' type='button'></button>
<a class='navbar-brand' href='../../../index.html'>
Drawing In Code:
<small>An exploration of artistic observation and computational thinking</small>
</a>
</nav>

<div class='container-fluid'>
<div class='row'>
<div class='col-md-3 col-lg-2 sidebar'>
<ul class='nav nav-sidebar'>
<li class='section'>
<a class="section_link" href="../../../index.html">Home</a>
</li>
</ul>
<ul class='nav nav-sidebar'>
<li class='section'>
<a class='section_link' data-section='drawings' href='#'>
Your Drawings
</a>
<ul class='collapse nav nav-sidebar' id='drawings'>
<li>
<a href="../../../drawings/index.html">Create A Drawing</a>
</li>
<li class='section drawings-list small mt-1 hidden-xs-up'>
<strong>My Drawings</strong>
</li>
</ul>
</li>
</ul>
<ul class='nav nav-sidebar'>
<li class='section'>
<a class="section_link" href="../../../examples/index.html">Gallery</a>
</li>
</ul>
<ul class='nav nav-sidebar'>
<li class='section'>
<a class='section_link' data-section='reference' href='#'>
Reference
</a>
<ul class='collapse nav nav-sidebar' id='reference'>
<li class='section mt-1'>
<strong>Context2D</strong>
</li>
<li>
<a href="../../reference/clear_rect/index.html">clearRect()</a>
<span class='tag tag-default'>
<small class='clear_rect'>0 / 2</small>
</span>
<div class='reference-modal-content' id='reference-modal-clear_rect'>
<div class='title'>context.clearRect()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.clearRect(x, y, width, height) will clear a rectangle starting
at (x, y) and clearing to the right width and down height.
</p>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>context.fillStyle = '#FF0000';&#x000A;context.fillRect(0, 0, canvas.width, canvas.height);&#x000A;&#x000A;context.clearRect(40, 20, 20, 100);&#x000A;context.clearRect(60, 60, 20, 20);&#x000A;context.clearRect(80, 20, 20, 100);&#x000A;&#x000A;context.clearRect(120, 20, 60, 20);&#x000A;context.clearRect(140, 40, 20, 60);&#x000A;context.clearRect(120, 100, 60, 20);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/clear_rect/reference-70cf88df0b9a8db2c33a8048af8493be9efdca18dd8ed4b2756cb0de8d8993af.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/fill_rect/index.html">fillRect()</a>
<span class='tag tag-default'>
<small class='fill_rect'>0 / 6</small>
</span>
<div class='reference-modal-content' id='reference-modal-fill_rect'>
<div class='title'>context.fillRect()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.fillRect(x, y, width, height) will draw a rectangle starting
at (x, y) and filling the area "width" to the right and "height" down.
</p>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>context.fillRect(50, 50, 300, 200);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/fill_rect/reference-ec68654dd34b051ccadd579a7b7b065ab4fa1eff1991e3d8df56cf72be3dee37.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/fill_style/index.html">fillStyle</a>
<span class='tag tag-default'>
<small class='fill_style'>0 / 3</small>
</span>
<div class='reference-modal-content' id='reference-modal-fill_style'>
<div class='title'>context.fillStyle</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.fillStyle will set the color for all future fills such as
context.fillRect(). It's important to note theat context.fillStyle
is not a method, it is an attribute. You set it like so:
</p>
<pre class='mb-2'><code>context.fillStyle = 'red';&#x000A;</code></pre>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>context.fillStyle = 'rgb(0,255,0)';&#x000A;context.fillRect(50, 50, 100, 200);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/fill_style/reference-8b359c7e565a86e657117d488129208cb37d2b93ac988ee482ddaf063385e12e.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/line_to/index.html">lineTo()</a>
<span class='tag tag-default'>
<small class='line_to'>0 / 6</small>
</span>
<div class='reference-modal-content' id='reference-modal-line_to'>
<div class='title'>context.lineTo()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.lineTo(x, y) creates a path from the current point - default (0,0) -
to the point (x, y). In order to see the line you must call context.stroke().
</p>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>context.beginPath();&#x000A;context.moveTo(50, 50);&#x000A;context.lineTo(100,100);&#x000A;context.lineTo(150, 50);&#x000A;context.lineTo(200, 100);&#x000A;context.stroke();&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/line_to/reference-2c3b4d87c54a374ee06ac132f850d07869ed961fac25769a9e1309faf9709371.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/save/index.html">save() / restore()</a>
<span class='tag tag-default'>
<small class='save'>0 / 5</small>
</span>
<div class='reference-modal-content' id='reference-modal-save'>
<div class='title'>context.save()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.save() saves all of the properties of the context. Then, when you call
context.restore() it will reset all changes to the context you've made.
</p>
<p>
This code will produce the image below (note how the second rectangle is black
and closer to the original origin despite calling translate and setting the
fillStyle earlier):
</p>
<pre class='mb-2'><code>context.save();&#x000A;context.translate(100,50);&#x000A;context.fillStyle = 'red';&#x000A;context.fillRect(10, 10, 25, 25);&#x000A;context.restore();&#x000A;&#x000A;context.fillRect(10, 10, 25, 25);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/save/reference-cfdb7b48454c0b82fb5105cf7a1228776bbee579585d77bf2b7cdeab9f8eb32a.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/scale/index.html">scale()</a>
<span class='tag tag-default'>
<small class='scale'>0 / 7</small>
</span>
<div class='reference-modal-content' id='reference-modal-scale'>
<div class='title'>context.scale()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.scale(percentX, percentY) scales the x and y coordinates of the context, making drawings
larger or smaller.
</p>
<p>
This code will produce the image below (note that all rectangles are defined to be the same size
in the code are drawn in different sizes due to the scale of the context):
</p>
<pre class='mb-2'><code>context.fillRect(25,25,25,25);&#x000A;context.scale(2, 1);&#x000A;context.fillRect(75,25,25,25);&#x000A;context.scale(0.5, 1);&#x000A;context.fillRect(150,25,25,25);&#x000A;context.scale(2, 2);&#x000A;context.fillRect(300,25,25,25);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/scale/reference-0569c769850c52c53953d385626946099b407d1037f93af347311149e3a2fec6.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/translate/index.html">translate()</a>
<span class='tag tag-default'>
<small class='translate'>0 / 6</small>
</span>
<div class='reference-modal-content' id='reference-modal-translate'>
<div class='title'>context.translate()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
context.translate(x, y) shifts the origin of the context (where the (0,0) point is)
right by x and down by y. This allows you to draw execute multiple commands in a specific
area of the context more easily.
</p>
<p>
This code will produce the image below (note how the fillRect commands are
relative to the translation point (100,100)):
</p>
<pre class='mb-2'><code>context.translate(50,50);&#x000A;context.fillStyle = 'red';&#x000A;context.fillRect(0, 0, 100, 100);&#x000A;context.fillStyle = 'green';&#x000A;context.fillRect(10, 10, 25, 25);&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/translate/reference-19fc53169ce0da0d057fb00b05eecfb3fc88513d1fa46cf4aceaa8fa19f51c26.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li class='section mt-1'>
<strong>Math</strong>
</li>
<li>
<a href="../../reference/round/index.html">round() / floor() / ceil()</a>
<span class='tag tag-default'>
<small class='round'>0 / 3</small>
</span>
<div class='reference-modal-content' id='reference-modal-round'>
<div class='title'>Math.round() / Math.floor() / Math.ceil()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Math.round(), Math.floor() and Math.ceil() will round a number to an integer.
Math.floor() will always round down while Math.ceil() will always round up.
Math.round() will round to the closest integer, either up or down.
</p>
</div>
<div class='offset-xs-1 col-xs-10'>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/floor/visual1-9edc722b188f28c702178c13d60cbec037d2e4159d2b7b5f7782a0be2dd5f653.png" alt="Visual1" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../reference/random/index.html">random()</a>
<span class='tag tag-default'>
<small class='random'>0 / 4</small>
</span>
<div class='reference-modal-content' id='reference-modal-random'>
<div class='title'>Math.random()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Math.random() will produce a random decimal betweek 0 and 1. Calling it many
times will produce a different random number each time.
</p>
<p>
Often you will multiple Math.random() by another number to get a random
integer larger than 1. You may also call Math.floor() or Math.ceil() on the result
to get an rounded integer.
</p>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/random/reference-d1ee7adb1a0544e928f64c175595c9f081740954db0ae3f889f0627b4034c642.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
</ul>
</li>
</ul>
<ul class='nav nav-sidebar'>
<li class='section'>
<a class='section_link' data-section='concepts' href='#'>
Concepts
</a>
<ul class='collapse nav nav-sidebar' id='concepts'>
<li>
<a href="../../concepts/variables/index.html">Variables</a>
<span class='tag tag-default'>
<small class='variables'>0 / 5</small>
</span>
<div class='reference-modal-content' id='reference-modal-variables'>
<div class='title'>Variables</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
A variable allows you to store information to use or change later.
</p>
</div>
<div class='offset-xs-1 col-xs-10'>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/variables/reference-b8e07ae4cdc5e13b2ee681381d7fa203f8442ff2e8abeb1cf4012cfb427439db.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/for_loops/index.html">For Loops</a>
<span class='tag tag-default'>
<small class='for_loops'>0 / 6</small>
</span>
<div class='reference-modal-content' id='reference-modal-for_loops'>
<div class='title'>For Loops</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
For-loops allow you to repeat code over and over again, potentially
adjusting the code a little bit each time.
</p>
<p>
The following code will produce the picture below:
</p>
<pre class='mb-2'><code>for (var i=1; i<10; ++i) {&#x000A;  context.fillRect(10 * i, 75 - (5 * i), 10 * i, 10 * i);&#x000A;}&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/for_loops/reference-ab4edc41708c315c5bc65d0ca07c1d49061a8185eb1420dbb6a056fa1be194bd.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/while_loops/index.html">While Loops</a>
<span class='tag tag-default'>
<small class='while_loops'>0 / 3</small>
</span>
<div class='reference-modal-content' id='reference-modal-while_loops'>
<div class='title'>While Loops</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
While-loops allow you to repeat code over and over again until a condition is met.
</p>
<p>
The following code will produce the picture below:
</p>
<pre class='mb-2'><code>var i = 10;&#x000A;while (i < 200) {&#x000A;  context.fillRect(5, 5, i, 50);&#x000A;  i += 10;&#x000A;}&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/while_loops/reference-b71bb24ae903b89143b68f3a561a455d71ca8c08674b34a2d9ffbde1753fc005.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/coordinates/index.html">Coordinates</a>
<span class='tag tag-default'>
<small class='coordinates'>0 / 3</small>
</span>
<div class='reference-modal-content' id='reference-modal-coordinates'>
<div class='title'>The Coordinate System</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
The coordinate system consists of X and Y values starting at (0, 0) in the upper left corner.
</p>
<p>
As you move down the canvas Y gets larger. As you move right on the canvas X gets larger.
</p>
<p>
So the point (100, 50) means you move right 100 and down 50.
</p>
<p class='text-xs-center'>
<img class="img-fluid" src="../../../assets/lessons/coordinates/reference-1875ea0cb51a1c7ed92a016a2256ba53d9b3f7820a9feaa679521c14af4e7acd.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/functions/index.html">Functions</a>
<span class='tag tag-default'>
<small class='functions'>0 / 5</small>
</span>
<div class='reference-modal-content' id='reference-modal-functions'>
<div class='title'>Functions</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Functions allow you to create chunks of code that can be called with
different parameters.
</p>
<p>
The following code will produce the picture below:
</p>
<pre class='mb-2'><code>function fillColorRect(x, y, w, h, color) {&#x000A;  context.save();&#x000A;  context.fillStyle = color;&#x000A;  context.fillRect(x, y, w, h);&#x000A;  context.restore();&#x000A;}&#x000A;&#x000A;fillColorRect(50, 50, 50, 50, 'red');&#x000A;fillColorRect(150, 50, 50, 50, 'blue');&#x000A;fillColorRect(250, 50, 50, 50, 'green');&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/functions/reference-2d2a07b0286e84d953685386201fe7e0bc20198460907e83c7895681f6b37a45.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/switch_statements/index.html">Switch Statements</a>
<span class='tag tag-default'>
<small class='switch_statements'>0 / 4</small>
</span>
<div class='reference-modal-content' id='reference-modal-switch_statements'>
<div class='title'>Switch Statements</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Switch statements allow you to perform different code depending on
the value of a variable.
</p>
<p>
The following code will produce the picture below (the switch statement
only performs the code inside of case 2 because "i" is set to 2):
</p>
<pre class='mb-2'><code>var i = 2;&#x000A;switch (i) {&#x000A;  case 1:&#x000A;    context.fillStyle = 'red';&#x000A;    break;&#x000A;  case 2:&#x000A;    context.fillStyle = 'yellow';&#x000A;    break;&#x000A;  case 3:&#x000A;    context.fillStyle = 'blue';&#x000A;    break;&#x000A;}&#x000A;context.fillRect(50, 50, 100, 50);&#x000A;&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/switch_statements/reference-3ab4709f6beedfca8a197ba64c75c9604abf7ccdb78c9adc16cf035c60914e8b.png" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/set_interval/index.html">setInterval()</a>
<div class='reference-modal-content' id='reference-modal-set_interval'>
<div class='title'>setInterval()</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
setInterval() allows you to execute code at specified intervals. It
is frequently used to create animations.
</p>
<p>This code will produce the image below:</p>
<pre class='mb-2'><code>var index = 0;&#x000A;function count() {&#x000A;  context.font = "20px serif";&#x000A;  context.textAlign = 'center';&#x000A;  context.fillText(index, canvas.width / 2, canvas.height / 2);&#x000A;}&#x000A;setInterval(count, 1000)&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/set_interval/reference-a47ff17199d8182591ccb0d45fa57147ee1136677cff7955671c6a01337479fa.gif" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
<li>
<a href="../../concepts/event_listeners/index.html">Event Listeners</a>
<div class='reference-modal-content' id='reference-modal-event_listeners'>
<div class='title'>Event Listeners</div>
<div class='content'>
<div class='row'>
<div class='col-xs-12'>
<p>
Event listeners allow you to "listen" for an event, such as a click, on an element
in your html.
</p>
<p>
A full list of events can be found here:
<a target="_blank" href="https://www.tutorialspoint.com/html5/html5_events.htm">HTML5 Events</a>
</p>
<p>This code will produce the image below (if you were to click and draw the letters on the canvas):</p>
<pre class='mb-2'><code>canvas.addEventListener('mousemove', function(e) {&#x000A;  if (e.buttons === 0) return;&#x000A;  context.fillRect(e.layerX - 3, e.layerY - 3, 7, 7);&#x000A;});&#x000A;</code></pre>
<p class='text-xs-center'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/event_listeners/reference-e166d58e874cfbbeb51fb29e622c9bf89d5c7a4aec6319d3953c94db43af1b0c.gif" alt="Reference" />
</p>
</div>
</div>
</div>

</div>
</li>
</ul>
</li>
</ul>
<ul class='nav nav-sidebar'>
<li class='section my-1'>
<a class='section_link' data-section='flappy_square' href='#'>Flappy Square</a>
<ul class='collapse in nav nav-sidebar' id='flappy_square'>
<li>
<a href="../stage1/index.html">Stage 1</a>
<span class='tag tag-default'>
<small class='flappy_square_stage1'>0 / 7</small>
</span>
</li>
<li>
<a href="../stage2/index.html">Stage 2</a>
<span class='tag tag-default'>
<small class='flappy_square_stage2'>0 / 6</small>
</span>
</li>
<li class='active'>
<a href="index.html">Stage 3</a>
<span class='tag tag-default'>
<small class='flappy_square_stage3'>0 / 3</small>
</span>
</li>
<li>
<a href="../stage4/index.html">Stage 4</a>
<span class='tag tag-default'>
<small class='flappy_square_stage4'>0 / 4</small>
</span>
</li>
<li class='section small mt-2'>
<strong>Relevant Reference</strong>
</li>
<li class='small '>
<a class="reference-link" data-slug="clear_rect" href="../clear_rect/index.html">clearRect()</a>
<span class='tag tag-default'>
<small class='clear_rect'>0 / 2</small>
</span>
</li>
<li class='small '>
<a class="reference-link" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
<span class='tag tag-default'>
<small class='fill_rect'>0 / 6</small>
</span>
</li>
<li class='small '>
<a class="reference-link" data-slug="fill_style" href="../fill_style/index.html">fillStyle</a>
<span class='tag tag-default'>
<small class='fill_style'>0 / 3</small>
</span>
</li>
<li class='small '>
<a class="reference-link" data-slug="line_to" href="../line_to/index.html">lineTo()</a>
<span class='tag tag-default'>
<small class='line_to'>0 / 6</small>
</span>
</li>
<li class='small '>
<a class="reference-link" data-slug="random" href="../random/index.html">random()</a>
<span class='tag tag-default'>
<small class='random'>0 / 4</small>
</span>
</li>
<li class='section small mt-1'>
<strong>Relevant Concepts</strong>
</li>
<li class='small '>
<a class="reference-link" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<span class='tag tag-default'>
<small class='coordinates'>0 / 3</small>
</span>
</li>
<li class='small '>
<a class="reference-link" data-slug="event_listeners" href="../event_listeners/index.html">Event Listeners</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="functions" href="../functions/index.html">Functions</a>
<span class='tag tag-default'>
<small class='functions'>0 / 5</small>
</span>
</li>
<li class='small '>
<a class="reference-link" data-slug="set_interval" href="../set_interval/index.html">setInterval()</a>
</li>
<li class='small '>
<a class="reference-link" data-slug="variables" href="../variables/index.html">Variables</a>
<span class='tag tag-default'>
<small class='variables'>0 / 5</small>
</span>
</li>
</ul>
</li>
</ul>
<ul class='nav nav-sidebar hidden-xs-up'>
<li class='section'>
<a class='section_link' data-section='experimental' href='#'>
All
</a>
</li>
<ul class='nav nav-sidebar'>
<li class='section small'>
<strong>Active</strong>
<li class='small '>
<a href="../../basic_cityscape/stage1/index.html">Basic Cityscape</a>
</li>
</li>
<li class='section small mt-2'>
<strong>Experimental</strong>
<li class='small '>
<a href="../../snake_game/stage1/index.html">Snake Game</a>
</li>
<li class='small '>
<a href="../stage1/index.html">Flappy Square</a>
</li>
<li class='small '>
<a href="../../flappy_birds/stage1/index.html">Flappy Birds</a>
</li>
<li class='small '>
<a href="../../granular_basic_cityscape/stage1/index.html">Basic Cityscape</a>
</li>
<li class='small '>
<a href="../../animated_cityscape/stage1/index.html">Animated Cityscape</a>
</li>
</li>
</ul>
</ul>

</div>
<div class='col-xs-12 offset-md-3 col-md-9 offset-lg-2 col-lg-10 main'>
<div class='page' id='flappy_square_stage3'>
<h1>Stage 3</h1>
<div class='description row py-3'>
<div class='col-xs-6'>
<h2 class='py-2'>
Stage 3 Overview
</h2>
<p>
In Stage 3 we'll work on our walls a bit more.
</p>
<p>
We need to make sure that if our flappy square runs into them
then we end the game.
</p>
<p>
It would also be good to randomize how often they appear and how
big the hole is that the flappy square needs to fly through.
</p>
</div>
<div class='col-xs-6'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/flappy_square/stage3/challenge3Example-05e1d78b6834ce4c564fcfeb96185aa4212e119379251ba97d253ec4134a44a2.gif" alt="Challenge3example" />
</div>
</div>
<div class='lesson row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Lesson: Collision Detection
</h2>
<p>
Collision detection is very common in games. You don't want your
characters running through walls like our flappy square currently is.
</p>
<p>
In order to detect the collision with something else in the game you
need to compare the position and size of everything in the game to make
sure nothing overlaps. Unfortunately it takes quite a few calculations to
check every object (and you have to check each side of the object)
against every other object. Luckily the computer is very good at making these
calculations so we can easily make these calculation each frame without slowing
the animation down.
</p>
<p>
In this example we'll show a simple collision against a wall. Since we
are only moving right we only need to check to see if the right side of the
square overlaps with the left edge of the wall at all.
</p>
<p>
<strong>Relevant Lessons:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
</p>

</div>
<div class='col-xs-12'>
<div class='interactive row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='flappy_square_stage3_lesson1_editor'>var canvas = document.getElementById('flappy_square_stage3_lesson1');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var interval;&#x000A;var time = 0;&#x000A;var box = {&#x000A;  size: 20,&#x000A;  x: 50,&#x000A;  y: 100,&#x000A;  speed: 3&#x000A;};&#x000A;&#x000A;var wallPosition = 300;&#x000A;&#x000A;function moveBox() {&#x000A;  box.x += box.speed;&#x000A;}&#x000A;&#x000A;function drawBox() {&#x000A;  context.fillRect(box.x, box.y, box.size, box.size);&#x000A;}&#x000A;&#x000A;function drawWall() {&#x000A;  context.fillRect(&#x000A;    wallPosition,&#x000A;    0,&#x000A;    canvas.width - wallPosition,&#x000A;    canvas.height&#x000A;  );&#x000A;}&#x000A;&#x000A;function checkWallCollision() {&#x000A;  if (box.x + box.size >= wallPosition) {&#x000A;    clearInterval(interval);&#x000A;&#x000A;    context.fillStyle = 'red';&#x000A;    drawBox();&#x000A;    drawWall();&#x000A;&#x000A;    context.font = "30px serif";&#x000A;    context.textAlign = 'left';&#x000A;    context.textBaseline = 'middle';&#x000A;    context.fillText('BANG!', 100, canvas.height / 2);&#x000A;  }&#x000A;}&#x000A;&#x000A;function programSteps() {&#x000A;  context.clearRect(0, 0, canvas.width, canvas.height);&#x000A;  moveBox();&#x000A;  drawBox();&#x000A;  drawWall();&#x000A;  checkWallCollision();&#x000A;}&#x000A;&#x000A;function runProgram() {&#x000A;  interval = setInterval(programSteps, 50);&#x000A;}&#x000A;&#x000A;&#x000A;// The following code is provided for you.&#x000A;// It creates an eventListener that listens&#x000A;// for the canvas to come into "focus", which&#x000A;// happens when you click on it.&#x000A;// This allows us to stop and start each individual&#x000A;// animation on this whole page separately.&#x000A;function startAnimation() {&#x000A;  runProgram();&#x000A;}&#x000A;&#x000A;function pauseAnimation() {&#x000A;  clearInterval(interval);&#x000A;&#x000A;  context.font = "20px serif";&#x000A;  context.textAlign = 'center';&#x000A;  context.fillText('Click anywhere on the canvas to start the animation.', canvas.width / 2, 50);&#x000A;}&#x000A;&#x000A;canvas.addEventListener('focus', startAnimation);&#x000A;canvas.addEventListener('blur', pauseAnimation);&#x000A;pauseAnimation();&#x000A;&#x000A;&#x000A;&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
<p>This is a lesson, not a challenge, the code runs automatically.</p>
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run btn btn-success'>
Run
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='flappy_square_stage3_lesson1'></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class='lesson row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Lesson: Collision Detection (More Complex)
</h2>
<p>
Collision detection is often far more complex than in the lesson above.
Luckily our flappy square game doesn't require overly complex collision
detection because our flappy square is always moving right and is always
in the same "x" position.
</p>
<p>
In this example we'll demonstrate a much more complex situation.
Instead of one box running into a wall, we'll have many boxes moving
in random directions and at random speeds bouncing off of each other.
In order to do this we have to compare every box to every other
box (as well as the borders of the game) to ensure nothing overlaps and
then run calculations to determine which direction the collision came from.
</p>
<p>
<strong>Relevant Lessons:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
</p>

</div>
<div class='col-xs-12'>
<div class='interactive row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='flappy_square_stage3_lesson2_editor'>var canvas = document.getElementById('flappy_square_stage3_lesson2');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var interval;&#x000A;var count = 15;&#x000A;var size = 20;&#x000A;var boxes = [];&#x000A;var boundary = {&#x000A;  minX: 25,&#x000A;  minY: 25,&#x000A;  maxX: 450,&#x000A;  maxY: 300&#x000A;};&#x000A;&#x000A;function overlaps(x, y, size, buffer) {&#x000A;  if (!buffer) buffer = 0;&#x000A;  var minX = x - buffer;&#x000A;  var minY = y - buffer;&#x000A;  var maxX = x + size + buffer;&#x000A;  var maxY = y + size + buffer;&#x000A;&#x000A;  for (var i=0; i< boxes.length; ++i) {&#x000A;    var box = boxes[i];&#x000A;    if (box.x == x && box.y == y) continue;&#x000A;&#x000A;    var minBoxX = box.x - buffer;&#x000A;    var minBoxY = box.y - buffer;&#x000A;    var maxBoxX = box.x + size + buffer;&#x000A;    var maxBoxY = box.y + size + buffer;&#x000A;&#x000A;    var left = (minX <= maxBoxX && minX >= minBoxX);&#x000A;    var right = (maxX >= minBoxX && maxX <= maxBoxX);&#x000A;    var top = (minY <= maxBoxY && minY >= minBoxY);&#x000A;    var bottom = (maxY >= minBoxY && maxY <= maxBoxY);&#x000A;&#x000A;    if ((left || right) && (top || bottom)) {&#x000A;      var leftOverlap = maxBoxX - minX;&#x000A;      var rightOverlap = maxX - minBoxX;&#x000A;      var topOverlap = maxBoxY - minY;&#x000A;      var bottomOverlap = maxY - minBoxY;&#x000A;&#x000A;      var overlaps = [&#x000A;        (left ? leftOverlap : 9999),&#x000A;        (right ? rightOverlap : 9999),&#x000A;        (top ? topOverlap : 9999),&#x000A;        (bottom ? bottomOverlap : 9999)&#x000A;      ];&#x000A;&#x000A;      var info = {box: box};&#x000A;      switch(Math.min.apply(null, overlaps)) {&#x000A;        case leftOverlap:&#x000A;          info.direction = 'left';&#x000A;          break;&#x000A;        case rightOverlap:&#x000A;          info.direction = 'right';&#x000A;          break;&#x000A;        case topOverlap:&#x000A;          info.direction = 'top';&#x000A;          break;&#x000A;        case bottomOverlap:&#x000A;          info.direction = 'bottom';&#x000A;          break;&#x000A;      }&#x000A;      return info;&#x000A;    }&#x000A;  }&#x000A;  return false;&#x000A;}&#x000A;&#x000A;function checkBoundary(x, y, size, buffer) {&#x000A;  if (!buffer) buffer = 0;&#x000A;  outOfBounds = {};&#x000A;  if (x + size + buffer > canvas.width) {&#x000A;    outOfBounds.right = true;&#x000A;  } else if (x < 0) {&#x000A;    outOfBounds.left = true;&#x000A;  }&#x000A;&#x000A;  if (y + size + buffer > canvas.height) {&#x000A;    outOfBounds.bottom = true;&#x000A;  } else if (y < 0) {&#x000A;    outOfBounds.top = true;&#x000A;  }&#x000A;  return outOfBounds;&#x000A;}&#x000A;&#x000A;function random(floor, ceil) {&#x000A;  return floor + Math.floor(Math.random() * ((ceil + 1) - floor));&#x000A;}&#x000A;&#x000A;function generateRandomPosition() {&#x000A;  var x;&#x000A;  var y;&#x000A;  do {&#x000A;    x = random(boundary.minX, boundary.maxX);&#x000A;    y = random(boundary.minY, boundary.maxY);&#x000A;  } while (overlaps(x, y, size, size));&#x000A;  return {x: x, y: y};&#x000A;}&#x000A;&#x000A;function generateBoxes() {&#x000A;  for (var i=0; i< count; ++i) {&#x000A;    var position = generateRandomPosition();&#x000A;&#x000A;    boxes.push({&#x000A;      x: position.x,&#x000A;      y: position.y,&#x000A;      xVelocity: [random(2, 6), random(-2, -6)][random(0, 1)],&#x000A;      yVelocity: [random(2, 6), random(-2, -6)][random(0, 1)],&#x000A;      collidedWith: {}&#x000A;    });&#x000A;  }&#x000A;}&#x000A;&#x000A;function adjustPositions() {&#x000A;  for (var i=0; i< count; ++i) {&#x000A;    boxes[i].x += boxes[i].xVelocity;&#x000A;    boxes[i].y += boxes[i].yVelocity;&#x000A;&#x000A;    var collision = overlaps(boxes[i].x, boxes[i].y, size);&#x000A;    if (collision) {&#x000A;      if (collision.box.collidedWith[i] > 0) {&#x000A;        collision.box.collidedWith[i] -= 1;&#x000A;      } else {&#x000A;        collision.box.collidedWith[i] = 5;&#x000A;&#x000A;        var newVelocity;&#x000A;        switch(collision.direction) {&#x000A;          case 'left':&#x000A;          case 'right':&#x000A;            newVelocity = collision.box.xVelocity;&#x000A;            collision.box.xVelocity = boxes[i].xVelocity;&#x000A;            boxes[i].xVelocity = newVelocity;&#x000A;            break;&#x000A;          case 'top':&#x000A;          case 'bottom':&#x000A;            newVelocity = collision.box.yVelocity;&#x000A;            collision.box.yVelocity = boxes[i].yVelocity;&#x000A;            boxes[i].yVelocity = newVelocity;&#x000A;            break;&#x000A;        }&#x000A;      }&#x000A;    } else {&#x000A;      boxes[i].collidedWith = {};&#x000A;    }&#x000A;&#x000A;    var boundary = checkBoundary(boxes[i].x, boxes[i].y, size);&#x000A;    if (Object.keys(boundary).length > 0) {&#x000A;      if (boundary.left || boundary.right) {&#x000A;        if (boundary.left) boxes[i].x = 1;&#x000A;        if (boundary.right) boxes[i].x = canvas.width - size - 1;&#x000A;        boxes[i].xVelocity = boxes[i].xVelocity * -1;&#x000A;      }&#x000A;&#x000A;      if (boundary.top || boundary.bottom) {&#x000A;        if (boundary.top) boxes[i].y = 1;&#x000A;        if (boundary.bottom) boxes[i].y = canvas.height - size - 1;&#x000A;        boxes[i].yVelocity = boxes[i].yVelocity * -1;&#x000A;      }&#x000A;    }&#x000A;  }&#x000A;}&#x000A;&#x000A;function drawBoxes() {&#x000A;  for (var i=0; i< count; ++i) {&#x000A;    var box = boxes[i];&#x000A;    context.save();&#x000A;    context.translate(box.x, box.y);&#x000A;    context.fillRect(0, 0, size, size);&#x000A;    context.fillStyle = 'white';&#x000A;    context.font = "10px serif";&#x000A;    context.textAlign = 'center';&#x000A;    context.textBaseline="middle";&#x000A;    context.fillText(i + 1, size/2, size/2);&#x000A;    context.restore();&#x000A;  }&#x000A;}&#x000A;&#x000A;function programSteps() {&#x000A;  context.clearRect(0, 0, canvas.width, canvas.height);&#x000A;&#x000A;  adjustPositions();&#x000A;  drawBoxes();&#x000A;}&#x000A;&#x000A;function runProgram() {&#x000A;  generateBoxes();&#x000A;  interval = setInterval(programSteps, 50);&#x000A;}&#x000A;&#x000A;&#x000A;// The following code is provided for you.&#x000A;// It creates an eventListener that listens&#x000A;// for the canvas to come into "focus", which&#x000A;// happens when you click on it.&#x000A;// This allows us to stop and start each individual&#x000A;// animation on this whole page separately.&#x000A;function startAnimation() {&#x000A;  runProgram();&#x000A;}&#x000A;&#x000A;function pauseAnimation() {&#x000A;  clearInterval(interval);&#x000A;&#x000A;  context.font = "20px serif";&#x000A;  context.textAlign = 'center';&#x000A;  context.fillText('Click anywhere on the canvas to start the animation.', canvas.width / 2, 50);&#x000A;}&#x000A;&#x000A;canvas.addEventListener('focus', startAnimation);&#x000A;canvas.addEventListener('blur', pauseAnimation);&#x000A;pauseAnimation();&#x000A;&#x000A;&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
<p>This is a lesson, not a challenge, the code runs automatically.</p>
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run btn btn-success'>
Run
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='flappy_square_stage3_lesson2'></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge1'>
<div class='col-xs-12'>
<div class='row pb-2'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 1
</h2>
<figure class='float-xs-right pl-2'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/flappy_square/stage3/challenge1Example-3a9d756fd0fa845fac6dc53ce555479db4faab8ca78edf3a984e6a51bce5325a.gif" alt="Challenge1example" />
<figcaption class='text-xs-center small'>Challenge 1 Sample Solution</figcaption>
</figure>
<p>
So now we're going to take our code from Stage 2 and we're going
to track whether our flappy square runs into a wall.
</p>
<p>
Collision detection is one of the more complicated problems you'll
deal with when developing a game. The lesson above demonstrates how
complex the calculations are. So take your time with this challenge
and don't get discouraged. It's hard stuff.
</p>
<p>
Luckily because our flappy square is flying constantly to the right
we only need to check for collisions to the right. We just
need to make sure the flappy square isn't flying through the hole
in the wall.
</p>
<p>
In each frame we'll find the wall that the flappy square is flying
through (if any) and make sure it is not flying through any of the
"wall" area.
</p>
<p>
We'll also need to keep track of the positions of each wall to find
the wall the flappy square is flying through.
</p>
<p>
In the example code below we find the wall that the flappy square is passing
through and check to see that the flappy square is above the bottom
of the top part of the wall (not going through the hole). If it is
then we call a new method, endGame(), that pulls out the logic
from checkBoundary() so that both checkBoundary() and checkWalls()
can end the game.
</p>
<pre><code>var left = square.x;&#x000A;var right = square.x + square.size;&#x000A;var top = square.y;&#x000A;var bottom = square.y + square.size;&#x000A;&#x000A;for (var i=0; i < walls.positions.length; ++i) {&#x000A;  var wallLeft = walls.positions[i];&#x000A;  var wallRight = position + walls.width;&#x000A;&#x000A;  if (wallLeft > right) continue;&#x000A;  if (wallRight < left) continue;&#x000A;&#x000A;  var topWallBottom = boundary.minY + walls.height;&#x000A;  if (top < topWallBottom) {&#x000A;    endGame();&#x000A;  }&#x000A;}&#x000A;</code></pre>
<p>
Remember this is only checking if the flappy square is hitting the
top portion of the wall. You'll need to ensure it isn't hitting the bottom
portion as well.
</p>
<p>
It's a bit complicated. Try to imagine each interaction (e.g. the square
moving to the right and running into a top wall) and figuring out how you would
know that the right side of the square has connected with the left side of
the wall while the square is above the bottom of the wall (for the top part
of the wall).
</p>
<p>
Yea, it's complicated.
</p>
<p>
Take it slowly and try to work it out.
</p>
<p>
In the end your flappy square should behave like the example provided at
the beginning of this description.
</p>
<div class='code-preview mb-2'>
<p>
<strong>Previous Challenge:</strong>
View your
<span class='code-preview-link' data-editorid='flappy_square_stage2_challenge4_editor'>
code from
Stage
2
Challenge
4
</span>
to use on this challenge.
</p>
<div class='code-preview-missing'>
<strong>Code Missing:</strong>
You have not yet entered any code in to the previous challenge:
Stage
2
Challenge
4
</div>
<div class='code-preview-view'>
<strong>
Stage
2
Challenge
4
</strong>
<div class='code-preview-code'></div>
</div>
</div>

</div>
</div>
<div class='row'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='flappy_square_stage3_challenge1_editor'>var canvas = document.getElementById('flappy_square_stage3_challenge1');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var interval;&#x000A;var gravity = 0.5;&#x000A;var distance = 0;&#x000A;&#x000A;var square = {&#x000A;  size: 20,&#x000A;  x: ,&#x000A;  y: ,&#x000A;  jump: ,&#x000A;  yVelocity:&#x000A;};&#x000A;&#x000A;var boundary = {&#x000A;  minX: ,&#x000A;  minY: ,&#x000A;  maxX: ,&#x000A;  maxY:&#x000A;};&#x000A;&#x000A;var walls = {&#x000A;  spacing:&#x000A;  width:&#x000A;  height:&#x000A;  positions: []&#x000A;};&#x000A;&#x000A;function drawBoundary() {&#x000A;}&#x000A;&#x000A;function drawWalls() {&#x000A;  // Remember to track their positions in wall.positions as well.&#x000A;}&#x000A;&#x000A;function drawSquare() {&#x000A;}&#x000A;&#x000A;function flap(e) {&#x000A;}&#x000A;&#x000A;function adjustPosition() {&#x000A;}&#x000A;&#x000A;function checkBoundary() {&#x000A;}&#x000A;&#x000A;function checkWalls() {&#x000A;  // CODE TO CHECK FOR WALL COLLISIONS HERE&#x000A;}&#x000A;&#x000A;function endGame() {&#x000A;  context.font = "20px serif";&#x000A;  context.textAlign = 'center';&#x000A;&#x000A;  var xCenter = ((boundary.maxX - boundary.minX) / 2) + boundary.minX;&#x000A;  var yCenter = ((boundary.maxY - boundary.minY) / 2) + boundary.minY;&#x000A;  context.fillText('Game Over', xCenter, yCenter);&#x000A;&#x000A;  pauseAnimation();&#x000A;}&#x000A;&#x000A;function programSteps() {&#x000A;&#x000A;  // Remember to run checkBoundary()&#x000A;  // and checkWalls() from there.&#x000A;&#x000A;}&#x000A;&#x000A;function runProgram() {&#x000A;  interval =&#x000A;}&#x000A;&#x000A;&#x000A;&#x000A;// The following code is provided for you.&#x000A;// It creates an eventListener that listens&#x000A;// for the canvas to come into "focus", which&#x000A;// happens when you click on it.&#x000A;// This allows us to stop and start each individual&#x000A;// animation on this whole page separately.&#x000A;function startAnimation() {&#x000A;  runProgram();&#x000A;}&#x000A;&#x000A;function pauseAnimation() {&#x000A;  clearInterval(interval);&#x000A;}&#x000A;&#x000A;canvas.addEventListener('focus', startAnimation);&#x000A;canvas.addEventListener('blur', pauseAnimation);&#x000A;&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
<p>This is a lesson, not a challenge, the code runs automatically.</p>
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run btn btn-success'>
Run
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='flappy_square_stage3_challenge1'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
<div class='lesson row py-3'>
<div class='col-xs-12'>
<div class='row'>
<div class='col-xs-12'>
<h2 class='py-2'>
Lesson: Randomization
</h2>
<p>
Our game isn't very interesting with every wall looking the exact same.
</p>
<p>
Randomizing the spacing between the walls, and the location and size of
the hole in the wall would make the game more interesting and challenging.
</p>
<p>
In this lesson we look at creating a drawing using random numbers.
</p>
<p>
We'll create a simple cityscape using rectangles that are different widths
and heights drawn next to each other.
</p>
<p>
The
<code>Math.random()</code>
method allows us to randomize this process so if you hit "Run" multiple
times you'll see the randomly generated "buildings" change each time.
</p>
<p>
So if we wanted to generate a random number between 40 and 200 for our
building height we can do something like this:
</p>
<pre><code>40 + Math.floor(Math.random() * 160)&#x000A;</code></pre>
<p>
The
<code>Math.random()</code>
generates a random decimal between 0 and 1 (such as 0.8). We multiply
that decimal by the maximum number we want (in this case 160 or 200 - 40)
to get a number between 0 and that maximum number.
</p>
<p>
<code>Math.floor()</code>
then rounds that number down (for example from 129.83 to just 129) and we
add 40 to give us a random integer between 40 and 200.
</p>
<p>
<strong>Relevant Lessons:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="random" href="../random/index.html">random()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
</p>

</div>
<div class='col-xs-12'>
<div class='interactive row py-1'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='flappy_square_stage3_lesson3_editor'>var canvas = document.getElementById('flappy_square_stage3_lesson3');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var ground = canvas.height - 20;&#x000A;function drawBuilding(x, width, height) {&#x000A;  context.fillRect(x, ground - height, width, height);&#x000A;}&#x000A;&#x000A;function random(lowerBound, upperBound) {&#x000A;  return lowerBound + Math.floor(&#x000A;    Math.random() * (upperBound - lowerBound)&#x000A;  );&#x000A;}&#x000A;&#x000A;var totalX = 0;&#x000A;while(totalX < canvas.width) {&#x000A;  var width = random(40, 100);&#x000A;  var height = random(50, 250);&#x000A;  drawBuilding(totalX, width, height);&#x000A;  totalX += width + 2;&#x000A;}&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
<p>This is a lesson, not a challenge, the code runs automatically.</p>
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run btn btn-success'>
Run
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='flappy_square_stage3_lesson3'></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge2'>
<div class='col-xs-12'>
<div class='row pb-2'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 2
</h2>
<figure class='float-xs-right pl-2'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/flappy_square/stage3/challenge2Example-3b9d83365d68e5dff0a617095ebb15d958941e1426a83e33a916701e5586918b.gif" alt="Challenge2example" />
<figcaption class='text-xs-center small'>Challenge 2 Sample Solution</figcaption>
</figure>
<p>
Our game landscape is a little repetitive. Each wall is equally spaced apart
and the holes through the walls are all the same size and in the same position.
We need to mix it up a bit more.
</p>
<p>
Let's take our code from challenge 1 and randomize both the spacing of the walls
and the size and position of the holes.
</p>
<p>
Use the
<code>Math.random()</code>
method to produce a random decimal between 0 and 1.
Then multiply that decimal by a larger number to create a random number
between 0 and that number. Use
<code>Math.floor()</code>
to produce an integer. Then you can add to that randomly produced integer
to change the range (for example add 40 to go from 0 - 160 to 40 - 200).
</p>
<p>
This looks something like this:
</p>
<pre><code>40 + Math.floor(Math.random() * 160)</code></pre>
<p>
If you run this multiple times you'll get values ranging between 40 and 200.
</p>
<p>
Use something similar to
<span class='highlight'>position walls between 100 and 200 pixels apart.</span>
</p>
<p>
You also need to keep track of where you position the walls so that they don't
move around randomly as you draw each frame. Make sure that your wall collision
detection works properly with their new random positions.
</p>
<p>
This is harder than it sounds when you're dealing with a moving background.
You'll need to position enough walls so that as the background moves the walls
keep coming, indefinitely.
</p>
<p>
There are many ways to do this, but I'd suggest you position walls until at least
one wall is outside the bounds of the canvas. Once that wall is within the bounds
of the canvas then you position the next wall off the canvas. If you continue doing
this then you'll always have one wall outside of the bounds of the game ready to
come in to view.
</p>
<p>
Let's also widen the hole in each wall so that we can easily fly through them
and observe the random spacing between our walls more easily. Make
the
<span class='highlight'>height of the walls 75 instead of 100.</span>
</p>
<p>
In the end your flappy square should behave like the example provided at
the beginning of this description.
</p>
<p>
<strong>Relevant Lessons:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="random" href="../random/index.html">random()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
</p>

<div class='code-preview mb-2'>
<p>
<strong>Previous Challenge:</strong>
View your
<span class='code-preview-link' data-editorid='flappy_square_stage3_challenge1_editor'>
code from
Stage
3
Challenge
1
</span>
to use on this challenge.
</p>
<div class='code-preview-missing'>
<strong>Code Missing:</strong>
You have not yet entered any code in to the previous challenge:
Stage
3
Challenge
1
</div>
<div class='code-preview-view'>
<strong>
Stage
3
Challenge
1
</strong>
<div class='code-preview-code'></div>
</div>
</div>

</div>
</div>
<div class='row'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='flappy_square_stage3_challenge2_editor'>var canvas = document.getElementById('flappy_square_stage3_challenge2');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var interval;&#x000A;var gravity = 0.5;&#x000A;var distance = 0;&#x000A;&#x000A;var square = {&#x000A;  size: 20,&#x000A;  x: ,&#x000A;  y: ,&#x000A;  jump: ,&#x000A;  yVelocity:&#x000A;};&#x000A;&#x000A;var boundary = {&#x000A;  minX: ,&#x000A;  minY: ,&#x000A;  maxX: ,&#x000A;  maxY:&#x000A;};&#x000A;&#x000A;var walls = {&#x000A;  spacing:&#x000A;  width:&#x000A;  height:&#x000A;  positions: []&#x000A;};&#x000A;&#x000A;function drawBoundary() {&#x000A;}&#x000A;&#x000A;function drawWalls() {&#x000A;  // USE Math.random() TO POSITION&#x000A;  // THE WALLS RANDOMLY. BE SURE TO&#x000A;  // TRACK THE POSITION OF EACH WALL!&#x000A;}&#x000A;&#x000A;function drawSquare() {&#x000A;}&#x000A;&#x000A;function flap(e) {&#x000A;}&#x000A;&#x000A;function adjustPosition() {&#x000A;}&#x000A;&#x000A;function checkBoundary() {&#x000A;}&#x000A;&#x000A;function checkWalls() {&#x000A;}&#x000A;&#x000A;function endGame() {&#x000A;  context.font = "20px serif";&#x000A;  context.textAlign = 'center';&#x000A;&#x000A;  var xCenter = ((boundary.maxX - boundary.minX) / 2) + boundary.minX;&#x000A;  var yCenter = ((boundary.maxY - boundary.minY) / 2) + boundary.minY;&#x000A;  context.fillText('Game Over', xCenter, yCenter);&#x000A;&#x000A;  pauseAnimation();&#x000A;}&#x000A;&#x000A;function programSteps() {&#x000A;}&#x000A;&#x000A;function runProgram() {&#x000A;  interval =&#x000A;}&#x000A;&#x000A;&#x000A;&#x000A;// The following code is provided for you.&#x000A;// It creates an eventListener that listens&#x000A;// for the canvas to come into "focus", which&#x000A;// happens when you click on it.&#x000A;// This allows us to stop and start each individual&#x000A;// animation on this whole page separately.&#x000A;function startAnimation() {&#x000A;  runProgram();&#x000A;}&#x000A;&#x000A;function pauseAnimation() {&#x000A;  clearInterval(interval);&#x000A;}&#x000A;&#x000A;canvas.addEventListener('focus', startAnimation);&#x000A;canvas.addEventListener('blur', pauseAnimation);&#x000A;&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
<p>This is a lesson, not a challenge, the code runs automatically.</p>
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run btn btn-success'>
Run
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='flappy_square_stage3_challenge2'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
<div class='challenge row py-3' id='challenge3'>
<div class='col-xs-12'>
<div class='row pb-2'>
<div class='col-xs-12'>
<h2 class='challenge-title py-2'>
Challenge 3
</h2>
<figure class='float-xs-right pl-2'>
<img class="img-fluid canvas-example" src="../../../assets/lessons/flappy_square/stage3/challenge3Example-05e1d78b6834ce4c564fcfeb96185aa4212e119379251ba97d253ec4134a44a2.gif" alt="Challenge3example" />
<figcaption class='text-xs-center small'>Challenge 3 Sample Solution</figcaption>
</figure>
<p>
Ok, now that we have a better understanding of randomization let's apply it to the
position and size of the hole in each wall.
</p>
<p>
Rather than having each portion of the wall be the same height (75 pixels) let's
vary them by randomizing the height of the top and bottom portion of the wall,
creating varying hole positions and sizes.
</p>
<p>
You can play around with varying sizes, but I'd suggest varying the top portion
<span class='highlight'>between 25 and 150 pixels.</span>
Then you'll want to create a varying height for the bottom portion that
is within the same parameters but you need to be careful. If you
randomly create two walls that are 150 pixels then you won't have any room
for the hole and you probably want the hole to be at least
<span class='highlight'>75 pixels.</span>
Similarly if you both the top and bottom portions of the wall are 25 pixels then
your hole will be 225 pixels (300 - 25 - 50), which is very big. So you may
want to make your hole no more than 150 pixels as well...
</p>
<p>
You'll need to store this information as well so that you can draw the same hole
in each frame. You may want to store a hash in the "positions" attribute of your "walls"
variable that contains the position, the height of the top wall, and the size of the
hole.
</p>
<p>
You'll need to update your wall collision detection to take this information into
account as well.
</p>
<p>
In the end your flappy square should behave like the example to the right.
</p>
<p>
<strong>Relevant Lessons:</strong>
<a class="reference-link btn btn-primary btn-sm" data-slug="random" href="../random/index.html">random()</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="coordinates" href="../coordinates/index.html">Coordinates</a>
<a class="reference-link btn btn-primary btn-sm" data-slug="fill_rect" href="../fill_rect/index.html">fillRect()</a>
</p>

<div class='code-preview mb-2'>
<p>
<strong>Previous Challenge:</strong>
View your
<span class='code-preview-link' data-editorid='flappy_square_stage3_challenge2_editor'>
code from
Stage
3
Challenge
2
</span>
to use on this challenge.
</p>
<div class='code-preview-missing'>
<strong>Code Missing:</strong>
You have not yet entered any code in to the previous challenge:
Stage
3
Challenge
2
</div>
<div class='code-preview-view'>
<strong>
Stage
3
Challenge
2
</strong>
<div class='code-preview-code'></div>
</div>
</div>

</div>
</div>
<div class='row'>
<div class='code-editor col-xs-6' data-files=''>
<div class='files'>
<div class='btn-group'>
<button aria-expanded='false' aria-haspopup='true' class='btn btn-secondary dropdown-toggle' data-toggle='dropdown' type='button'>
Files
</button>
<div class='dropdown-menu dropdown-menu-right'></div>
</div>
</div>
<h5>
Editor
<small class='instructions'>(write code below)</small>
</h5>
<div class='editor' id='flappy_square_stage3_challenge3_editor'>var canvas = document.getElementById('flappy_square_stage3_challenge3');&#x000A;var context = canvas.getContext('2d');&#x000A;&#x000A;var interval;&#x000A;var gravity = 0.5;&#x000A;var distance = 0;&#x000A;&#x000A;var square = {&#x000A;  size: 20,&#x000A;  x: ,&#x000A;  y: ,&#x000A;  jump: ,&#x000A;  yVelocity:&#x000A;};&#x000A;&#x000A;var boundary = {&#x000A;  minX: ,&#x000A;  minY: ,&#x000A;  maxX: ,&#x000A;  maxY:&#x000A;};&#x000A;&#x000A;var walls = {&#x000A;  spacing:&#x000A;  width:&#x000A;  height:&#x000A;  positions: []&#x000A;};&#x000A;&#x000A;function drawBoundary() {&#x000A;}&#x000A;&#x000A;function drawWalls() {&#x000A;  // Set the height of the top and&#x000A;  // bottom portions of the wall&#x000A;  // randomly and track them.&#x000A;}&#x000A;&#x000A;function drawSquare() {&#x000A;}&#x000A;&#x000A;function flap(e) {&#x000A;}&#x000A;&#x000A;function adjustPosition() {&#x000A;}&#x000A;&#x000A;function checkBoundary() {&#x000A;}&#x000A;&#x000A;function checkWalls() {&#x000A;  // Be sure to incorporate&#x000A;  // the new randomly generated&#x000A;  // heights.&#x000A;}&#x000A;&#x000A;function endGame() {&#x000A;  context.font = "20px serif";&#x000A;  context.textAlign = 'center';&#x000A;&#x000A;  var xCenter = ((boundary.maxX - boundary.minX) / 2) + boundary.minX;&#x000A;  var yCenter = ((boundary.maxY - boundary.minY) / 2) + boundary.minY;&#x000A;  context.fillText('Game Over', xCenter, yCenter);&#x000A;&#x000A;  pauseAnimation();&#x000A;}&#x000A;&#x000A;function programSteps() {&#x000A;}&#x000A;&#x000A;function runProgram() {&#x000A;  interval =&#x000A;}&#x000A;&#x000A;&#x000A;&#x000A;// The following code is provided for you.&#x000A;// It creates an eventListener that listens&#x000A;// for the canvas to come into "focus", which&#x000A;// happens when you click on it.&#x000A;// This allows us to stop and start each individual&#x000A;// animation on this whole page separately.&#x000A;function startAnimation() {&#x000A;  runProgram();&#x000A;}&#x000A;&#x000A;function pauseAnimation() {&#x000A;  clearInterval(interval);&#x000A;}&#x000A;&#x000A;canvas.addEventListener('focus', startAnimation);&#x000A;canvas.addEventListener('blur', pauseAnimation);&#x000A;&#x000A;</div>
<div class='log bg-faded text-muted small'>
<button aria-label='Close' class='close' type='button'>
<span aria-hidden='true'>×</span>
</button>
<div class='title'>
<strong>Message Log</strong>
</div>
<div class='messages'></div>
</div>
<div class='buttons py-1'>
<div class='lesson-text-message small text-xs-center'>
<p>This is a lesson, not a challenge, the code runs automatically.</p>
<p>But change it! Play with it! Click "Run" to see your changes.</p>
</div>
<div class='run btn btn-success'>
Run
</div>
<div class='reset btn btn-danger'>
Reset
</div>
</div>
</div>
<div class='visual col-xs-6'>
<h5>
Canvas
<small>(your drawing will display here)</small>
</h5>
<div class='canvas'>
<canvas id='flappy_square_stage3_challenge3'></canvas>
</div>
<div class='alert'></div>
</div>
</div>
</div>
</div>
</div>

<div aria-hidden='true' aria-labelledby='referenceModalLabel' class='modal fade' id='reference-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<button aria-label='Close' class='close' data-dismiss='modal' type='button'>
<span aria-hidden='true'>×</span>
</button>
<h4 class='modal-title' id='referenceModalLabel'></h4>
</div>
<div class='modal-body'></div>
<div class='modal-footer'>
<div class='float-xs-right'>
<button class='btn btn-secondary' data-dismiss='modal' type='button'>Close</button>
</div>
<div class='text-xs-left'>
<button class='btn btn-primary text-white lesson-link'>View Full Lesson</button>
</div>
</div>
</div>
</div>
</div>
<div class='py-3'>
<h2>
Ready for the next lesson?
</h2>
<p class='py-1'>
Next up, the
<a href="../stage4/index.html">&quot;Stage: 4&quot; lesson &gt;</a>
</p>
</div>
</div>
</div>
</div>
</body>
</html>

<!-- Localized -->